import{j as n,r as is}from"./index-7s7xaQU8.js";import{r as e}from"./index-CC6F48bw.js";import{C as cs,p as An,o as Vn,Q as pe,q as rt,e as Pe,r as us,s as Y,t as Q,u as ds,v as Jt,w as fs,x as ps,y as gs,k as Ee,V as qt,z as ms,A as It,n as Kt,E as hs,G as xs,H as Bn,I as Hn,J as ys,P as lt,S as at,D as it,W as ct,a as ut,M as dt,B as fn,K as ot,N as Ne,j as _t,R as Gt,X as Ss,T as pn,Y as bs,Z as vs}from"./month-view-CEJq5NJt.js";import{d as ft}from"./dataSource-CrVxx1x3.js";/* empty css               */import"./index-qiR4Kxfn.js";var ze;(function(s){s.Circular="Circular",s.Cupertino="Cupertino",s.SingleCircle="SingleCircle",s.DoubleCircle="DoubleCircle"})(ze||(ze={}));const Qt=e.forwardRef((s,a)=>{const{className:r,label:t="",visible:c=!0,thickness:o="3px",animationDuration:l="1s",color:x=cs.Primary,size:k="36px",overlay:S=!1,type:M=ze.Circular,children:h,...y}=s,$=e.useRef(null);e.useEffect(()=>{An("spinner")},[]);const b=36,P=e.useMemo(()=>({label:t,visible:c,thickness:o,animationDuration:l,color:x,size:k,overlay:S,type:M}),[t,c,o,l,x,k,S,M]);e.useImperativeHandle(a,()=>({...P,element:$.current}),[P]);const B=({thickness:w,duration:L})=>e.useMemo(()=>{const z=(b-w)/2,V=2*Math.PI*z;return n.jsx("svg",{viewBox:`0 0 ${b} ${b}`,children:n.jsx("circle",{cx:b/2,cy:b/2,r:(b-w)/2,strokeWidth:w,strokeDasharray:V,strokeDashoffset:V*.25,strokeLinecap:"round",fill:"none",className:"sf-spinner-circle-inner",style:{animation:`spinner-rotate ${L} linear infinite`}})})},[w,L,b]),H=({duration:w,thickness:L})=>{const N=e.useMemo(()=>{const V=b/2-b*.1,ae=L,te=b*.15,ie=360/12;return Array.from({length:12},(he,d)=>{const g=ie*d,j=(d+1)/12;return n.jsx("line",{x1:b/2,y1:b/2-V,x2:b/2,y2:b/2-V+te,className:"sf-spinner-cupertino-dots-inner",strokeWidth:ae,strokeLinecap:"round",opacity:j,transform:`rotate(${g} ${b/2} ${b/2})`},d)})},[L]);return n.jsx("svg",{viewBox:`0 0 ${b} ${b}`,className:"sf-spinner-cupertino-dots",style:{animation:`spinner-rotate ${w} linear infinite`},children:N})},A=({thickness:w,duration:L})=>{const{outerCircleRadius:N,innerCircleRadius:z,outerDashLength:V,innerDashLength:ae}=e.useMemo(()=>{const te=(b-w)/2,ie=(b-w*5)/2,he=2*Math.PI*te,d=2*Math.PI*ie,g=4,j=he/(g*2),E=d/(g*2);return{outerCircleRadius:te,innerCircleRadius:ie,outerDashLength:j,innerDashLength:E}},[w,b]);return n.jsxs(n.Fragment,{children:[n.jsx("svg",{viewBox:`0 0 ${b} ${b}`,className:"sf-spinner-doublecircle-inner",children:n.jsx("circle",{cx:b/2,cy:b/2,r:N,strokeWidth:w,fill:"none",strokeDasharray:`${V} ${V}`,strokeLinecap:"round",style:{animation:`spinner-dash ${L} linear infinite`}})}),n.jsx("svg",{viewBox:`0 0 ${b} ${b}`,className:"sf-spinner-doublecircle-second-inner",children:n.jsx("circle",{cx:b/2,cy:b/2,r:z,strokeWidth:Math.max(1,w-1),fill:"none",strokeDasharray:`${ae} ${ae}`,strokeLinecap:"round",style:{animation:`spinner-dash ${L} linear infinite`}})})]})},_=({thickness:w,duration:L})=>e.useMemo(()=>{const z=(b-w)/2,te=2*Math.PI*z/(8*2);return n.jsx("svg",{viewBox:`0 0 ${b} ${b}`,children:n.jsx("circle",{cx:b/2,cy:b/2,r:z,strokeWidth:w,fill:"none",className:"sf-spinner-singlecircle-inner",strokeDasharray:`${te} ${te}`,strokeLinecap:"round",style:{animation:`spinner-rotate ${L} linear infinite`}})})},[w,L]),W=w=>{if(typeof w!="string")return"1s";const L=["ms","s"];for(const N of L)if(w.endsWith(N)){const z=w.slice(0,-N.length),V=parseFloat(z);if(!isNaN(V))return`${V}${N}`}return"1s"},C=x,f=Math.max(1,parseFloat(o)||3),p=e.useMemo(()=>W(l),[l]),i=e.useMemo(()=>{if(h!=null)return h;switch(M){case ze.Cupertino:return n.jsx(H,{thickness:f,duration:p});case ze.DoubleCircle:return n.jsx(A,{thickness:f,duration:p});case ze.SingleCircle:return n.jsx(_,{thickness:f,duration:p});case ze.Circular:default:return n.jsx(B,{thickness:f,duration:p})}},[h,M,C,f,p]),m=Vn(k),I=e.useMemo(()=>({width:m,height:m}),[m]),T=e.useMemo(()=>`sf-spinner${S?" sf-spinner-overlay":""} sf-control${r?" "+r:""} sf-spinner-${String(x).toLowerCase()}`,[S,r,x]),R=e.useMemo(()=>M===ze.DoubleCircle&&!h?"sf-spinner-doublecircle":"",[M,h]);return c?n.jsx("div",{ref:$,className:T,"aria-live":"polite",role:"status",...y,children:n.jsxs("div",{className:"sf-content-center sf-spinner-content ",children:[n.jsx("span",{className:R,style:I,children:i}),t?n.jsx("div",{className:"sf-spinner-label",children:t}):null]})}):null});Qt.displayName="Spinner";var zt;(function(s){s.Left="Left",s.Right="Right"})(zt||(zt={}));function Cs(s,a,r=rt.None){const t=[],c=us({},Yt,a);if(c.groupBy){let o=new pe().group(String(c.groupBy));o=On(r,"key",o),$n(s,o).forEach(x=>{const k={};k[String(c.text)]=x.key,k.isHeader=!0;let S=String(c.text);S==="id"&&(S="text",Object.assign(k,{text:x.key})),k[String(c.id)]=`group-list-item-${x.key?x.key.toString().trim():"undefined"}`,k.items=x.items,t.push(k),t.push(...x.items)})}return t}function On(s,a,r=new pe){const t=r instanceof pe?r:new pe;return s==="Ascending"?t.sortBy(a,"ascending",!0):s==="Descending"?t.sortBy(a,"descending",!0):t.queries&&(t.queries=t.queries.filter(c=>c.fn!=="onSortBy")),t}function $n(s,a){return!s||!a?[]:new Pe(s).executeLocal(a)}function js(s,a){const r={};if(Y(s))return s;if(typeof s=="string"||typeof s=="number"||typeof s=="boolean"){const t=s.toString();return r[a.text||"text"]=t,r[a.id||"id"]=s,r}else if(Y(s.isHeader)){for(const t of Object.keys(a))if(Object.prototype.hasOwnProperty.call(a,t)){const c=a[t],o=!Y(c)&&typeof c=="string"?Q(c,s):void 0;!Y(o)&&typeof c=="string"&&c.trim()&&(r[String(c)]=o)}if(!a.text&&a.id&&!Y(Q(a.id,s))){const t=a.id,c=Q(t,s);r.text=c}}else return s;return r}const ks=s=>{if(!s)return 40;const a=s.querySelector(".sf-list-item"),r=a?a.offsetHeight:0;return typeof r=="number"&&r>0?r:40},Is=(s,a)=>a?a.querySelector(`.sf-list-item[data-index="${s}"]`):null,Nt=(s,a)=>{!a||Y(s)||requestAnimationFrame(()=>{var t;const r=Is(s,a);if(r)(t=r==null?void 0:r.scrollIntoView)==null||t.call(r,{block:"nearest",inline:"nearest"});else{const c=ks(a);a.scrollTop=s*c}})},gn=(s,a,r)=>Math.max(a,Math.min(r,s)),wt=(s,a,r,t,c)=>{const o=Math.floor(a/Math.max(1,r)),l=gn(o-c,0,Math.max(0,s)),x=gn(l+t+c*2,0,s),k=l*r,S=Math.max(0,s*r);return{startIndex:l,endIndex:x,offsetY:k,totalHeight:S}},ws=s=>s&&s.classList.contains("sf-list-item")&&!s.classList.contains("sf-list-group-item")&&!s.classList.contains("sf-disabled")&&!s.classList.contains("sf-display-none"),Ds="sf-list-group-item",Es="sf-list-item",Ts="sf-level",Rs="sf-has-child",Ms="sf-disabled",Fs="sf-navigable",Ns=(s,a,r,t,c,o,l,x,k,S,M)=>{const h=e.useMemo(()=>({...Yt,...a}),[a]),y=e.useMemo(()=>js(s,h),[s,h]),$=e.useMemo(()=>y[String(h.id)]||ds("listitem"),[y,h.id]),b=e.useMemo(()=>!!(Object.prototype.hasOwnProperty.call(s,"isHeader")&&y.isHeader),[s]),P=e.useMemo(()=>(y[String(h.child)]||[]).length>0,[y,h.child]),B=e.useMemo(()=>M||!!(y[String(h.checked)]&&y[String(h.checked)].toString()==="true"),[y,h.checked,M]),H=e.useMemo(()=>y[String(h.text)]||(h.id&&y[String(h.id)]?y[String(h.id)].toString():""),[h.text,h.id,y]),A=e.useMemo(()=>String(h.icon)in y&&!Y(y[String(h.icon)]),[y,h.icon]),_=e.useMemo(()=>!!y[String(h.imageUrl)],[y,h.imageUrl]),W=e.useMemo(()=>!!y[String(h.url)],[y,h.url]),C=e.useMemo(()=>!b&&c?typeof c=="function"?c(s):c:b&&o?typeof o=="function"?o(s):o:null,[b,o,c,s]),f=e.useMemo(()=>[b?Ds:Es,b&&r===0?"sf-list-group-first-item":"",`${Ts}-${(l==null?void 0:l.level)??1}`,y&&!Y(y[String(h.disabled)])&&y[String(h.disabled)].toString()==="true"?Ms:"",P?Rs:"",x?"sf-checklist":"",(k?S??"":r===t?x?"sf-focused":"sf-active":"")||"",y&&y[String(h.url)]?Fs:"",y&&!Y(y[String(h.visible)])&&y[String(h.visible)].toString()==="false"?"sf-display-none":"",y&&x&&B?"sf-active":""].filter(Boolean).join(" ").trim(),[b,l==null?void 0:l.level,y,h.disabled,P,x,k,S,r,t,M]),p=e.useMemo(()=>{const m={className:f,role:(l==null?void 0:l.groupItemRole)!==""&&(l==null?void 0:l.itemRole)!==""?b?l==null?void 0:l.groupItemRole:l==null?void 0:l.itemRole:void 0,"aria-level":(l==null?void 0:l.groupItemRole)==="presentation"||(l==null?void 0:l.itemRole)==="presentation"||l==null?void 0:l.level};return Y(y)||Y(y[String(h.tooltip)])||(m.title=String(y[String(h.tooltip)])),m},[f,l,b,h,r,y]),i=e.useMemo(()=>{if(!y||!Object.prototype.hasOwnProperty.call(y,String(h.htmlAttributes))||!y[String(h.htmlAttributes)])return p;let m={...p};const I=y[String(h.htmlAttributes)],{className:T,style:R,...w}=I;return T&&(m.className=`${m.className||""} ${T}`.trim()),R&&(m.style={...m.style,...R}),m={...m,...w},m},[p,y,h.htmlAttributes]);return{mergedFields:h,fieldData:y,uid:$,grpLI:b,checked:B,liProps:i,displayText:H,hasChild:P,hasIcon:A,hasImage:_,hasUrl:W,templateContent:C,ariaAttributes:l}},Ls="sf-list-icon",mn="sf-list-text",As="sf-list-url",Vs="sf-list-img",Bs="sf-anchor-wrap",Hs=e.memo(({item:s,fields:a,index:r,focusedIndex:t,parentClass:c,itemTemplate:o,groupTemplate:l,ariaAttributes:x,checkBox:k,checkBoxPosition:S,isChecked:M,as:h,onItemClick:y,onItemKeyDown:$,getItemProps:b,...P})=>{if(Y(s))return null;const{ripple:B}=Jt(),{rippleMouseDown:H,Ripple:A}=fs(B),{className:_,...W}=e.useMemo(()=>(b==null?void 0:b({item:s,index:r}))||{},[b,s,r]),C=Ns(s,a,r,t,o,l,x,k,c,_,M),f=h??"li",p=e.useCallback(L=>{y==null||y(L,r)},[y,r]),i=e.useCallback(L=>{$==null||$(L,r)},[$,r]),m={...C.liProps,...P,...W,onClick:p,onKeyDown:i,onMouseDown:H},I=()=>n.jsx("span",{className:mn,children:C.displayText}),T=()=>n.jsx(ps,{className:"sf-font-size-lg"}),R=({position:L})=>n.jsx(gs,{className:`sf-listview-checkbox sf-checkbox-${L.toLowerCase()}`,checked:C.checked}),w=()=>n.jsxs(n.Fragment,{children:[C.hasIcon&&n.jsx("div",{className:Ls,children:C.fieldData[String(C.mergedFields.icon)]}),C.hasImage&&n.jsx("img",{className:Vs,src:String(C.fieldData[String(C.mergedFields.imageUrl)]),alt:"Icon"})]});return n.jsxs(f,{"data-value":C.uid,"data-index":r,...m,children:[C.templateContent?C.templateContent:n.jsxs(n.Fragment,{children:[c&&C.displayText,!c&&n.jsx("div",{className:"sf-list-text-content",children:C.hasUrl?n.jsx("a",{className:`${mn} ${As}`,href:String(C.fieldData[String(C.mergedFields.url)]),children:n.jsxs("div",{className:Bs,children:[n.jsx(w,{}),C.displayText,C.hasChild&&n.jsx(T,{})]})}):n.jsxs(n.Fragment,{children:[n.jsx(w,{}),!C.fieldData.isHeader&&k&&(S==="Left"?n.jsxs(n.Fragment,{children:[n.jsx(R,{position:"Left"}),n.jsx(I,{}),C.hasChild&&n.jsx(T,{})]}):n.jsxs(n.Fragment,{children:[n.jsx(I,{}),n.jsx(R,{position:"Right"}),C.hasChild&&n.jsx(T,{})]})),!k&&n.jsxs(n.Fragment,{children:[n.jsx(I,{}),C.hasChild&&n.jsx(T,{})]})]})})]}),!C.grpLI&&B&&n.jsx(A,{})]},C.uid)}),Os=({checkBox:s,fields:a,listItemDatas:r,onSelect:t,setListItemDatas:c,scrollParent:o})=>{const[l,x]=e.useState(null),[k,S]=e.useState([]),M=f=>{const p=o!=null&&o.current&&"element"in o.current&&o.current.element?o.current.element:o==null?void 0:o.current;if(!p)return;const i=Math.max(0,Math.min(f,Math.max(0,(r==null?void 0:r.length)-1)));x(r[Number(i)]),Nt(i,p)},h=f=>{const p=a.disabled,i=f.isHeader===!0,m=p?f[String(p)]===!0||f[String(p)]==="true":!1,I=f[String(a.visible)]===!0;return!i&&!m&&!I},y=e.useCallback((f,p,i)=>{const m={data:p,event:f,selected:!0,index:i},I=(a==null?void 0:a.id)||"id",T=l?Math.max(0,r.findIndex(R=>String(R[String(I)])===String(l[String(I)])))===i:!1;if(t==null||t(m,T),!p[String(a.child)]){const R=p[String(I)].toString();S([R.toString()]),x(p)}},[t,c,r,l,a]),$=e.useCallback((f,p,i)=>{h(f)&&y(p,f,i)},[y,r]),b=e.useCallback(f=>{const p=a.checked||"checked",i=r.map(m=>{if(m[String(a.id)].toString()===f){const I=m[String(p)];return I===!0||I==="true"?(S(R=>R.filter(w=>w.toString()!==f.toString())),{...m,[p]:!1}):(S(R=>[...R,f.toString()]),{...m,[p]:!0})}return m});c(i)},[a,r,c]),P=e.useCallback((f,p,i)=>{var T;if(!f)return;const m=(T=f[String(a.id)])==null?void 0:T.toString(),I={data:f,event:p,index:i};t==null||t(I,!1),b(m),x(f)},[t,b,k,a]),B=(f,p,i,m)=>{let I=m==="arrowKey"?f+p:f;const T=a.disabled;for(;I>=0&&I<i.length;){const R=i[Number(I)],w=R.isHeader===!0,L=T?R[String(T)]===!0||R[String(T)]==="true":!1,N=R[String(a.visible)]===!0;if(!w&&!L&&!N)return I;I+=p}return-1},H=e.useCallback((f,p,i)=>{const I=B(f,p?-1:1,r,i);M(I!==-1?I:f)},[r]),A=e.useCallback((f,p)=>{if(!r||r.length===0)return;const i=p?r.length-1:0;H(i,p,"homeKey")},[r]),_=e.useCallback((f,p)=>{if(!r||r.length===0)return;const i=(a==null?void 0:a.id)||"id",m=l?Math.max(0,r.findIndex(T=>String(T[String(i)])===String(l[String(i)]))):-1,I=m===-1?p?r.length-1:-1:m;H(I,p,"arrowKey")},[r,l,a==null?void 0:a.id]),W=e.useCallback((f,p)=>{if(s&&Object.keys(r).length){const i=r[Number(p)];P(i,f,p)}},[s,r,P]),C=e.useCallback((f,p)=>{switch(f.key){case"Home":f.preventDefault(),A(f,!1);break;case"End":f.preventDefault(),A(f,!0);break;case"ArrowDown":f.preventDefault(),_(f,!1);break;case"ArrowUp":f.preventDefault(),_(f,!0);break;case" ":f.preventDefault(),W(f,p);break}},[A,_,s,W]);return{focusedItem:l,activeItemsId:k,handleSelection:$,keyActionHandler:C,setCheckboxLI:P}},$s=(s,a)=>{const{items:r,itemSize:t,pageSize:c,overscanCount:o=5,scrollParent:l,height:x=360,onScrollRequest:k,role:S="listbox",showSkeleton:M,initialVisibleIndex:h=0,itemContent:y,style:$,totalCount:b,className:P,...B}=s,H=e.useMemo(()=>typeof b=="number"&&b>0?b:r.length,[b,r.length]),[A,_]=e.useState(()=>wt(H,0,t,c,o)),[W,C]=e.useState(0),[f,p]=e.useState(!1),i=e.useRef(null),m=e.useRef(!1),I=e.useRef(0),T=e.useRef(!1),R=e.useRef(null),w=e.useRef(0),L=e.useRef(0),N=e.useMemo(()=>Math.max(0,Math.floor(W/Math.max(1,t))),[W,t]),z=e.useMemo(()=>{if(!r||r.length===0)return-1;const j=Math.min(N,r.length-1);for(let E=j;E>=0;E--){const O=r[Number(E)];if(O.isHeader)return E}return-1},[r,N]),V=e.useMemo(()=>z>=0?r[Number(z)]:null,[r,z]),ae={items:r,itemSize:t,pageSize:c,overscanCount:o,scrollParent:l,height:x,showSkeleton:M,initialVisibleIndex:h,totalCount:b};e.useImperativeHandle(a,()=>({...ae,element:(l==null?void 0:l.current)||i.current}),[ae]),e.useEffect(()=>{_(wt(H,W,t,c,o))},[H,t,c,o]),e.useEffect(()=>{if(T.current)return;const j=(l==null?void 0:l.current)||i.current;if(!j)return;const O=Math.max(0,Math.min(h,Math.max(0,H)))*t;j.scrollTop=O,T.current=!0,C(O),_(wt(H,O,t,c,o))},[l==null?void 0:l.current,h,H,t,c,o]);const te=e.useMemo(()=>{const j=Math.min(A.startIndex,r.length),E=Math.min(A.endIndex,r.length);return r.slice(j,E)},[r,A.startIndex,A.endIndex]),ie=e.useCallback(async(j,E)=>{if(!k||!(E.endIndex>=r.length))return;const q=r.length;let Z=c+o;if(typeof b=="number"&&b>0){const oe=Math.min(H,E.endIndex);oe>r.length&&(Z=oe)}if(m.current||I.current>r.length)return;m.current=!0,p(!0),I.current=q+Z;const ge=await k({startIndex:q,count:Z,originalEvent:j});Promise.resolve(ge).catch(()=>{p(!1)}).finally(()=>{m.current=!1,p(!1)})},[k,r.length,c,o,f,H,b]),he=e.useCallback(j=>{const E=(l==null?void 0:l.current)||i.current;if(!E||f)return;const O=E.scrollTop,q=wt(H,O,t,c,o),Z=w.current??0;if(Math.abs(q.startIndex-Z)>o&&R.current){const oe=q.offsetY||0;oe!==L.current&&(R.current.style.transform=`translate3d(0px, ${oe}px, 0px) translateZ(0px)`,L.current=oe)}ie(j,q),requestAnimationFrame(()=>{w.current=q.startIndex,C(O),_(q)})},[t,c,o,H,r.length,l,ie,f]);e.useEffect(()=>{const j=(l==null?void 0:l.current)||i.current;if(j)return j.addEventListener("scroll",he,{passive:!0}),()=>j.removeEventListener("scroll",he)},[he,l==null?void 0:l.current]),e.useEffect(()=>{M&&(r.length===0&&k?p(!0):r.length>0&&p(!1))},[r.length,k,M]);const d=e.useCallback(()=>n.jsxs(n.Fragment,{children:[V&&W>=t&&n.jsx("div",{className:"sf-pinned-group",children:y(z,V)}),n.jsx("div",{className:"sf-virtual-content sf-pos-relative",style:{height:A.totalHeight},children:n.jsx("div",{className:"sf-virtual-items",ref:R,style:{transform:`translate3d(0px, ${A.offsetY}px, 0px) translateZ(0px)`},children:M&&f&&te.length!==0?Array.from({length:te.length}).map((j,E)=>n.jsx("div",{className:"sf-list-skeleton",style:{height:t}},`skeleton-${E}`)):te.map((j,E)=>{const O=A.startIndex+E;return y(O,j)})})})]}),[t,A.totalHeight,A.offsetY,M,f,te,A.startIndex,y,V,z,W]),g=e.useMemo(()=>["sf-virtual-scroll-parent",P].filter(Boolean).join(" ").trim(),[P]);return l?d():n.jsx("div",{ref:i,role:S,className:g,style:{height:x,...$},...B,children:d()})},Ps=e.forwardRef($s),hn="sf-list-parent sf-ul",Ws={level:1,listRole:"list",listLabel:"list",itemRole:"listitem",groupItemRole:"group"},Yt={id:"id",text:"text",url:"url",checked:"checked",disabled:"disabled",icon:"icon",child:"child",visible:"visible",tooltip:"tooltip",htmlAttributes:"htmlAttributes",imageUrl:"imageUrl",groupBy:void 0},Us=e.memo(e.forwardRef(({items:s,fields:a=Yt,scrollParent:r,checkBox:t=!1,checkBoxPosition:c=zt.Left,virtualization:o,parentClass:l,itemTemplate:x,groupTemplate:k,ariaAttributes:S,getItemProps:M,onItemKeyDown:h,onSelect:y,setListItemDatas:$,onScrollRequest:b,disableDefaultInteractions:P=!1,disabled:B=!1},H)=>{S={...Ws,...S};const _=e.useRef(null),W=e.useRef(null);e.useImperativeHandle(H,()=>_.current,[]);const C=Os({checkBox:t,fields:a,listItemDatas:s||[],onSelect:y,setListItemDatas:$||(()=>{}),scrollParent:r!=null&&r.current?r:W}),f=(a==null?void 0:a.id)??"id",p=e.useMemo(()=>{var w;if(!C.focusedItem||!s)return-1;const R=String((w=C.focusedItem)==null?void 0:w[String(f)]);return Y(R)?-1:s.findIndex(L=>String(L==null?void 0:L[String(f)])===String(R))},[C.focusedItem,s,f]),i=e.useCallback((R,w)=>{if(B)return;if(P){y==null||y({event:R,index:w},p===w);return}const L=R.currentTarget,N=s==null?void 0:s[Number(w)];N&&(t&&ws(L)?L.classList.contains("sf-has-child")?C.handleSelection(N,R,w):C.setCheckboxLI(N,R,w):C.handleSelection(N,R,w))},[P,B,t,C]),m=e.useCallback(R=>{B||(P||C.keyActionHandler(R,p),h==null||h(R,p))},[P,C,h,p,B]),I=e.useMemo(()=>[l||"sf-list-container",o?"sf-virtualization":""].filter(Boolean).join(" ").trim(),[o,l]),T=e.useCallback((R,w)=>n.jsx(Hs,{item:w,fields:a,index:R,onItemClick:i,getItemProps:M,itemTemplate:x,groupTemplate:k,checkBoxPosition:c,parentClass:l,ariaAttributes:S,checkBox:t,focusedIndex:p,isChecked:C.activeItemsId.includes(String(w==null?void 0:w[String(f)])),as:o?"div":"li"},`sf-item-${R}`),[a,i,M,x,k,c,l,S,t,p,C.activeItemsId,f]);return n.jsx("div",{ref:_,className:I,children:o?n.jsx("div",{ref:W,className:hn,role:(S==null?void 0:S.listRole)??void 0,"aria-label":(S==null?void 0:S.listLabel)??void 0,tabIndex:0,onKeyDown:m,children:n.jsx(Ps,{items:s,itemSize:o==null?void 0:o.itemSize,pageSize:o==null?void 0:o.pageSize,overscanCount:o==null?void 0:o.overscanCount,showSkeleton:o.showSkeleton,scrollParent:r||W,onScrollRequest:b,itemContent:T})}):n.jsx("ul",{ref:W,className:hn,role:(S==null?void 0:S.listRole)??void 0,"aria-label":(S==null?void 0:S.listLabel)??void 0,tabIndex:0,onKeyDown:m,children:s==null?void 0:s.map((R,w)=>T(w,R))})})})),qs=s=>{const a=e.useMemo(()=>["sf-ddl sf-popup",s.className].filter(Boolean).join(" "),[s.className]),{isOpenControlled:r,isPopupOpen:t,open:c,setIsPopupOpen:o,setAriaExpanded:l,setIsSpanFocused:x,spanElementRef:k,inputElementRef:S,popupRef:M,onOpen:h,onClose:y,popupWidth:$,popupHeight:b}=s,P=e.useCallback(C=>{var f;r||(o(!0),l(!0),(f=k.current)==null||f.focus()),h&&h({event:C})},[r,o,l,k,h,M]),B=e.useCallback(C=>{var f;r||(o(!1),l(!1)),y&&M.current&&y({event:C}),c||(x(!0),(f=S==null?void 0:S.current)==null||f.focus())},[r,o,l,y,M,c,x,S]),H=e.useCallback(C=>{var I,T,R;const f=C.target,p=!!k.current&&!k.current.contains(f),i=!!((I=M.current)!=null&&I.element)&&!M.current.element.contains(f),m=f instanceof Element?f:null;(t&&p&&i||!p&&((R=(T=M.current)==null?void 0:T.element)!=null&&R.classList.contains("sf-input-group")))&&(B(C),x(!1)),p&&!(m&&m.matches(".sf-list-item"))&&!(m&&m.matches(".sf-input-icon"))&&x(!1)},[t,B,x,k,M]),A=e.useCallback((C,f,p)=>{const i=Vn(C);if(!i.includes("%"))return i;const m=parseFloat(i);if(!f||Number.isNaN(m))return i;const I=typeof f.getBoundingClientRect=="function"?f.getBoundingClientRect():null,T=p==="width"?f.offsetWidth:f.offsetHeight,R=I?p==="width"?I.width:I.height:0;let w=0;if(typeof window<"u"&&window.getComputedStyle){const N=window.getComputedStyle(f),z=p==="width"?N.width:N.height;w=parseFloat(z||"0")||0}return`${(T||R||w||0)*m/100}px`},[]),_=e.useCallback(()=>A($,k.current,"width"),[$,k,A]),W=e.useCallback(()=>A(b,S.current,"height"),[b,S,A]);return e.useEffect(()=>(t&&document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}),[t,H]),e.useEffect(()=>{const C=f=>{var i;const p=((i=M.current)==null?void 0:i.element)&&!M.current.element.contains(f.target)&&!k.current.contains(f.target);t&&p&&(B(f),x(!1))};return t&&document.addEventListener("scroll",C,!0),()=>{document.removeEventListener("scroll",C,!0)}},[t,B,M,x]),{showPopup:P,hidePopup:B,setPopupWidth:_,setPopupHeight:W,popupClassNames:a}},_s=({valueTemplate:s,dropdownValue:a,dataSource:r,fields:t,allowObjectBinding:c=!1,onRenderedChange:o})=>{const l=e.useMemo(()=>{if(!s||a==null||!Array.isArray(r)||r.length===0)return null;const x=r[0];return typeof x=="string"||typeof x=="number"||typeof x=="boolean"?new Map(r.map(h=>[h,h])).get(a)??null:r.find(M=>{const h=t.value?Q(t.value,M):M;return c?h===a:h===a||h!=null&&a!=null&&h.toString()===a.toString()})??null},[s,a,r,t,c]);return e.useEffect(()=>{o&&o(l!==null&&!!s)},[o,l,s]),!s||l===null?null:typeof s=="function"?n.jsx(n.Fragment,{children:s(l)}):n.jsx(n.Fragment,{children:s})},Gs=e.memo(_s),zs=s=>{const{isInteractive:a,skipDisabledItems:r,activeIndex:t,isRemoteData:c,dataSourceListItems:o,fields:l,onChange:x,setTextValue:k,setActiveIndex:S,dropdownbaseRef:M,showPopup:h,hidePopup:y,setIsSpanFocused:$,setDropdownValue:b,prefetchData:P,currentItemData:B,setItemData:H,onScroll:A,virtualization:_}=s,W=e.useCallback(d=>d.map(g=>{const j=(l==null?void 0:l.disabled)&&typeof g=="object"&&Q(l.disabled,g)===!0,E=typeof g=="object"&&!!Q("isHeader",g);return{item:g,isDisabled:!!j,isHeader:E}}),[l==null?void 0:l.disabled]),C=e.useCallback(d=>d!=null&&d.isHeader?!0:!!(d!=null&&d.isDisabled),[]),f=e.useCallback((d,g,j)=>{if(!r)return Math.max(0,Math.min(d.length-1,g+j));let E=g;const O=d.length;for(let q=0;q<O&&(E+=j,!(E<0||E>=d.length));q++)if(!C(d[E]))return E;return-1},[r,C]),p=e.useCallback((d,g=!1)=>{if(!r)return g?d.length-1:0;if(g){for(let j=d.length-1;j>=0;j--)if(!C(d[j]))return j;return-1}else{for(let j=0;j<d.length;j++)if(!C(d[j]))return j;return-1}},[r,C]),i=e.useCallback((d,g)=>{if(!r||!C(d[g]))return g;let j=g,E=g;for(;j<d.length-1||E>0;){if(j<d.length-1&&(j++,!C(d[j])))return j;if(E>0&&(E--,!C(d[E])))return E}return-1},[r,C]),m=d=>String(ht(d.item,"text",l)??""),I=(d,g,j)=>{if(!d||d.length===0||!g)return-1;const E=d.length;let O=Math.max(-1,Math.min(E-1,j));for(let q=0;q<E;q++){O=(O+1)%E;const Z=d[O];if(!C(Z)&&m(Z).toLowerCase().startsWith(g))return O}return-1},T=(d,g,j)=>{const E=ht(d.item,"value",l);k==null||k(String(ht(d.item,"text",l))),E!==void 0&&(b==null||b(E),H==null||H(d.item)),x&&E!==void 0&&x({event:g,previousItemData:j==null?void 0:j.item,value:E,itemData:d.item})},R=()=>{var g,j;const d=M.current?(j=(g=M.current)==null?void 0:g.getFilteredListData)==null?void 0:j.call(g):null;return Array.isArray(d)?W(d):o},w=d=>{const g=typeof B=="object"&&B!==null?Q((l==null?void 0:l.value)??"value",B):B,j=d.findIndex(E=>String(ht(E.item,"value",l))===String(g??""));return j!==-1||B?j:t??-1},L=e.useCallback((d,g,j,E)=>{S(j);const O=E>-1?g[E]:void 0;if(T(g[j],d,O),j>=g.length-1&&_&&A){const Z=Array.isArray(g)?g.length:0,ge=_.overscanCount??5,oe=_.pageSize+ge;A({originalEvent:d.nativeEvent,startIndex:Z,count:oe})}},[S,T,_,A]),N=e.useCallback(d=>{const g=d.key.toLowerCase(),j=O=>{var ge,oe;if(O.length===0)return;const q=w(O),Z=I(O,g,q);Z!==-1&&(L(d,O,Z,q),M.current&&Nt(Z,(oe=(ge=M.current)==null?void 0:ge.getScrollContainer)==null?void 0:oe.call(ge)))};if((!o||o.length===0)&&P&&c){ae(d);return}const E=R();E&&j(E)},[t,c,o,P,W,M,S,r,T,B,l,L]),z=d=>d==="ArrowDown"||d==="ArrowUp"||d==="PageUp"||d==="PageDown"||d==="Home"||d==="End",V=e.useCallback((d,g,j)=>{const E=g.length;switch(d){case"ArrowDown":return f(g,j,1);case"ArrowUp":return f(g,j,-1);case"PageDown":{const O=j!==-1?j:0,q=Math.max(0,Math.min(E-1,O+10));return i(g,q)}case"PageUp":{const O=j!==-1?j:E-1,q=Math.max(0,Math.min(E-1,O-10));return i(g,q)}case"Home":return p(g,!1);case"End":return p(g,!0);default:return j}},[f,i,p]),ae=d=>{P==null||P().then(g=>{if(!g||g.length===0)return;const j=W(g);te(d,j,d.key)})},te=e.useCallback((d,g,j)=>{var q,Z;if(g.length===0)return;const E=w(g),O=V(j,g,E);O!==E&&O>=0&&O<g.length&&(L(d,g,O,E),M.current&&Nt(O,(Z=(q=M.current)==null?void 0:q.getScrollContainer)==null?void 0:Z.call(q)))},[t,S,V,T,B,l,L]),ie=(d,g)=>{g?(h(d),$(!0),d.preventDefault()):y(d),$(!0)};return{keyActionHandler:e.useCallback(d=>{var j,E;if(!a)return;if(d.altKey){if(d.key==="ArrowDown"){ie(d,!0);return}if(d.key==="ArrowUp"){ie(d,!1),d.preventDefault();return}}if(d.key===" "){ie(d,!0);return}else if(d.key==="Enter")if(d.preventDefault(),M!=null&&M.current){const O=R();if(!O)return;const q=w(O);q&&q>=0&&q<O.length&&L(d,O,q,q),ie(d,!1);return}else{ie(d,!0);return}else if(d.key==="Tab"||d.key==="Escape"){if(ie(d,!1),d.key==="Tab"){$(!1);return}d.preventDefault(),d.stopPropagation();return}if(d.key.length===1&&!d.ctrlKey&&!d.metaKey&&!d.altKey&&!((E=(j=d.target)==null?void 0:j.classList)!=null&&E.contains("sf-input-filter"))){d.preventDefault(),N(d);return}if(z(d.key)){if(d.preventDefault(),(!o||o.length===0)&&P&&c){ae(d);return}const O=R();O&&te(d,O,d.key)}},[a,M,h,y,$,o,P,W,te,t,c,B,ie,R,ae])}},Js=(s={})=>{const{value:a,defaultValue:r,open:t,loading:c,onChange:o}=s,[l,x]=e.useState(!!t),[k,S]=e.useState(!1),[M,h]=e.useState(""),[y,$]=e.useState(!1),[b,P]=e.useState(!!c),[B,H]=e.useState(null),[A,_]=e.useState(null),[W,C]=e.useState(null),[f,p]=e.useState(null),i=e.useMemo(()=>t!==void 0,[t]),m=e.useMemo(()=>a!==void 0&&!!o,[a,o]),I=e.useMemo(()=>m||a!==void 0?a:r!==void 0?r:null,[m,a,r]),[T,R]=e.useState(I);e.useEffect(()=>{i&&x(!!t)},[i,t]),e.useEffect(()=>{P(!!c)},[c]),e.useEffect(()=>{m&&R(a)},[m,a]);const w=e.useCallback(()=>{i||x(!0),S(!0)},[i]),L=e.useCallback(()=>{i||x(!1),S(!1)},[i]);return[{isPopupOpen:l,ariaExpanded:k,dropdownValue:T,textValue:M,isSpanFocused:y,isLoading:b,activeIndex:B,itemData:A,previousItemData:W,changeEvent:f},{setIsPopupOpen:V=>x(V),setAriaExpanded:V=>S(V),setDropdownValue:V=>R(V),setTextValue:V=>h(V),setIsSpanFocused:V=>$(V),setIsLoading:V=>P(V),setActiveIndex:V=>H(V),setItemData:V=>_(V),setPreviousItemData:V=>C(V),setChangeEvent:V=>p(V),openPopup:w,closePopup:L}]},Ks=s=>{const{value:a,defaultValue:r,dataSource:t,dataSourceListItems:c,fields:o,isValueControlled:l,allowObjectBinding:x,filterable:k,dropdownbaseRef:S,dropdownValue:M,setDropdownValue:h,setTextValue:y,setActiveIndex:$,setItemData:b,prefetchData:P}=s,B=e.useRef(r),H=e.useRef(!1),A=e.useRef(t),_=e.useCallback(i=>typeof i=="string"||typeof i=="number"||typeof i=="boolean",[]),W=e.useCallback(i=>{if(Array.isArray(t)){const T=t[0];if((typeof T=="string"||t.length===0)&&typeof i=="boolean"){y("");return}else if(typeof T=="object"&&!x)return}const m=o==null?void 0:o.text,I=m&&i&&typeof i=="object"?String(i[m]):"";y(_(i)?String(i):x&&m?String(I):"")},[t,_,y]),C=e.useCallback(i=>{const m=o==null?void 0:o.value;return x&&i&&typeof i=="object"&&m?i[m]??null:i??null},[x,o==null?void 0:o.value]),f=e.useCallback((i,m)=>{const I=o==null?void 0:o.value;if(m&&typeof m=="object"&&I){for(let T=0;T<m.length;T++)if(Q(I,m[T].item)===i)return{index:T,textValue:Q(o.text||o.value,m[T].item)}}return{index:-1,textValue:i}},[o==null?void 0:o.value,o==null?void 0:o.text]),p=e.useCallback((i,m)=>{if(!Array.isArray(i)||Y(m))return!1;const I=i.length>0&&_(i[0]),T=o==null?void 0:o.value,R=o==null?void 0:o.text,w=new Map;i.forEach((N,z)=>{const V=I?String(N):T?String(Q(T,N)):"";w.set(V,z)});const L=w.get(String(m))??-1;if(L!==-1){const N=i[L],z=String(I?N:R?Q(R,N):m);return y(z),$(L),b==null||b(N),!0}return!1},[o==null?void 0:o.value,o==null?void 0:o.text,_,$,y]);e.useLayoutEffect(()=>{var I,T,R,w,L;if(l){const N=a;if(Y(N))y(""),$(null);else{h(N);const z=k?(I=S==null?void 0:S.current)==null?void 0:I.getFilteredListData():t;if(z&&Array.isArray(z))p(z,N)||W(N);else if(z instanceof Pe){const V=C(N);if(Y(V))y(""),$(null);else{let ae=((R=(T=S==null?void 0:S.current)==null?void 0:T.getTextByValue)==null?void 0:R.call(T,V))??"",te=((L=(w=S==null?void 0:S.current)==null?void 0:w.getIndexByValue)==null?void 0:L.call(w,V))??-1;if(ae===""&&!(S!=null&&S.current)){const{index:ie,textValue:he}=f(V,c);ae=he,te=ie}y(ae),$(te!==-1?te:null)}}}return}const i=JSON.stringify(B.current)!==JSON.stringify(r),m=JSON.stringify(A.current)!==JSON.stringify(t);if(!H.current||i||m){const N=a??r??M;Y(N)?(y(""),$(null)):(h(N),t&&Array.isArray(t)?p(t,N)||W(N):t instanceof Pe&&P&&P().then(z=>{!z||z.length===0||p(z,N)||W(N)})),H.current=!0,B.current=r,A.current=t}},[l,a,r,t,o==null?void 0:o.value,o==null?void 0:o.text,p,h,W,y,$])},Xt=e.forwardRef((s,a)=>{const{dataSource:r,query:t,fields:c,value:o=null,placeholder:l="",id:x=`dropdownlist_${e.useId()}`,disabled:k=!1,readOnly:S=!1,popupSettings:M={},allowObjectBinding:h=!1,labelMode:y="Never",open:$,skipDisabledItems:b=!0,defaultValue:P=null,ignoreCase:B=!0,ignoreAccent:H=!1,filterable:A=!1,filterType:_="StartsWith",filterPlaceholder:W="",debounceDelay:C=0,sortOrder:f=rt.None,loading:p=!1,size:i=Ee.Medium,variant:m=qt.Standard,inputProps:I={},itemTemplate:T,headerTemplate:R,footerTemplate:w,groupTemplate:L,valueTemplate:N,noRecordsTemplate:z,clearButton:V=!1,dropdownIcon:ae,valid:te,validationMessage:ie="",validityStyles:he=!0,required:d,className:g,virtualization:j,onChange:E,onOpen:O,onClose:q,onError:Z,onFilter:ge,onDataRequest:oe,onDataLoad:Le,onScroll:We,onErrorTemplate:Je,...pt}=s,At=e.useMemo(()=>n.jsx(ms,{}),[]),ce=r!==void 0?r:[],ne=e.useMemo(()=>c??{text:"text",value:"value",groupBy:"groupBy",disabled:"disabled"},[c==null?void 0:c.text,c==null?void 0:c.value,c==null?void 0:c.groupBy,c==null?void 0:c.disabled,c==null?void 0:c.htmlAttributes]),Ve=e.useMemo(()=>{const D={...I||{}};return delete D.className,delete D.id,delete D.readOnly,delete D.required,delete D.value,delete D.defaultValue,D},[I]),Xe=$!==void 0,[Te,je]=e.useState(!1),[xt,Ke]=e.useState(!1),[Ue,Qe]=e.useState(!1),[Ae,qe]=e.useState(!1),_e=e.useRef(null),Be=e.useRef(null),yt=e.useRef(null),X=e.useRef(null),Vt=e.useRef(null),Bt=e.useRef(o),Re=e.useRef(null),xe=e.useRef(null),He=e.useRef(null),ye=e.useRef(!1),[Ht,St]=Js({defaultValue:P}),{isPopupOpen:se,ariaExpanded:gt,dropdownValue:Se,textValue:Ze,isSpanFocused:et,isLoading:Oe,activeIndex:Me,itemData:$e}=Ht,{setIsPopupOpen:tt,setAriaExpanded:Ye,setDropdownValue:ke,setTextValue:be,setIsSpanFocused:Ce,setIsLoading:u,setActiveIndex:v,setItemData:F,setPreviousItemData:G,setChangeEvent:U}=St,ee=D=>{var K;Ce(!se),Oe&&!re&&!p&&u(!1),S||(se?Ge(D):(vt(D),(K=_e.current)==null||K.focus()))},re=e.useMemo(()=>ce instanceof Pe,[ce]),{dir:me,locale:ue}=Jt(),le=`${x.replace(/[,]/g,"_")}_spinner`,{isInputValid:fe}=Qs({dropdownValue:Se,inputElementRef:Be,required:d,valid:te,validationMessage:ie}),Fe=e.useMemo(()=>`${x}_listbox`,[x]),mt=e.useCallback(D=>`${x}_option_${D}`,[x]),bt=e.useMemo(()=>({role:"combobox","aria-controls":Fe,"aria-activedescendant":Me!=null?mt(Me):void 0,"aria-expanded":gt,"aria-autocomplete":"list"}),[Fe,Me,mt,gt]),Ie=e.useMemo(()=>({zIndex:1e3,position:{X:"left",Y:"bottom"},collision:me==="rtl"?{X:It.Fit,Y:It.Flip}:{X:It.Flip,Y:It.Flip},autoReposition:!0,width:"100%",height:"300px",...M}),[M,me]),{showPopup:vt,hidePopup:Ge,setPopupWidth:qn,setPopupHeight:_n,popupClassNames:Gn}=qs({isOpenControlled:Xe,isPopupOpen:se,open:$,setIsPopupOpen:tt,setAriaExpanded:Ye,setIsSpanFocused:Ce,spanElementRef:_e,inputElementRef:Be,popupRef:yt,onOpen:O,onClose:q,popupWidth:Ie.width,popupHeight:Ie.height,className:g}),Zt=e.useMemo(()=>{const D=Re.current?Re.current:ce;if(!Array.isArray(D)||D.length===0)return[];const K=D.filter(de=>de!=null&&(typeof de=="string"||typeof de=="number"||typeof de=="boolean"||typeof de=="object"));return K.length===0?[]:Pn(K,ne,f,t??new pe).map(de=>{const ve=ne.disabled&&typeof de=="object"&&Q(ne.disabled,de)===!0,jt=typeof de=="object"&&!!Q("isHeader",de);return{item:de,isDisabled:!!ve,isHeader:jt}})},[Re.current,ce,ne,f,t,Ue]),Ct=e.useCallback(()=>{u(!0),qe(!0)},[u]),we=e.useCallback(()=>{u(!1),qe(!1)},[u]),Ot=e.useCallback(()=>{if(we(),ye.current=!0,X.current&&Se!==null&&Se!==void 0){const D=X.current.getDataByValue(Se);if(D!==void 0){const K=ne==null?void 0:ne.text,J=typeof D=="object"&&K?String(Q(K,D)):typeof D=="string"||typeof D=="number"||typeof D=="boolean"?String(D):X.current.getTextByValue(Se);be(J)}}},[we,X,Se,ne==null?void 0:ne.text,be]),$t=e.useCallback(async()=>{const D=re?await rs():ce;if(Array.isArray(D)){const K=D.filter(J=>J!=null&&(typeof J=="string"||typeof J=="number"||typeof J=="object"));return Re.current=K,Qe(!0),K}return null},[Ae,ye,Ot,ee,we]);Ks({value:o,defaultValue:P,dataSource:ce,dataSourceListItems:Zt,fields:ne,isValueControlled:xt,allowObjectBinding:h,filterable:A,dropdownbaseRef:X,dropdownValue:Se,setDropdownValue:D=>ke(D),setTextValue:D=>be(D),setActiveIndex:D=>v(D),setItemData:F,prefetchData:$t}),e.useEffect(()=>{$!==void 0&&$!==se&&tt(!!$)},[$,se,tt]);const zn=e.useCallback(D=>{we(),u(!1),Qe(!0),Z==null||Z(D)},[Ae,ye,we,Z]),{keyActionHandler:Pt}=zs({isInteractive:!k&&!S,skipDisabledItems:b,activeIndex:Me,onChange:E,setActiveIndex:v,isRemoteData:re,dataSourceListItems:Zt,fields:ne,dropdownbaseRef:X,setTextValue:D=>be(D),showPopup:vt,hidePopup:Ge,setIsSpanFocused:Ce,setDropdownValue:D=>ke(D),prefetchData:$t,currentItemData:$e,setItemData:F,onScroll:We,virtualization:j}),Wt=e.useCallback((D,K,J,de)=>{G($e||null),U(K);let ve=de??D;typeof J=="string"||typeof J=="number"||typeof J=="boolean"?(F(J),ke(J),ve=J):(F(J),de!=null&&(ke(de),ve=de)),X.current!=null&&ve!==null&&ve!==void 0&&v(X.current.getIndexByValue(ve)),E&&ve!==void 0&&E({event:K,previousItemData:$e,value:ve,itemData:J||null})},[$e,E,ne]),en=e.useCallback(D=>{var de,ve,jt,on,ln,kt,an;const J=D.target.closest(".sf-list-item");if(J){const cn=((de=J.dataset)==null?void 0:de.value)??null;if(cn){const st=(jt=(ve=X==null?void 0:X.current)==null?void 0:ve.getFormattedValue)==null?void 0:jt.call(ve,cn),os=((on=X==null?void 0:X.current)==null?void 0:on.getTextByValue(st))||"";be==null||be(os),st!==void 0&&(ke==null||ke(st));const ls=(ln=X==null?void 0:X.current)==null?void 0:ln.getDataByValue(st),un=(an=(kt=X==null?void 0:X.current)==null?void 0:kt.getFilteredListData)==null?void 0:an.call(kt);if(un){const dn=un.findIndex(as=>String(ht(as,"value",ne))===String(st??""));dn>=0&&(v==null||v(dn))}Wt==null||Wt(J,D,ls,st)}Ge==null||Ge()}},[Ge,ne,be,ke,X]);e.useEffect(()=>{o!==void 0&&o!==Bt.current&&!h&&Ke(!0)},[o]),e.useEffect(()=>{se&&A&&X.current&&requestAnimationFrame(()=>{Ce(!1)})},[se,A]),e.useEffect(()=>{u(p)},[p,u]),e.useEffect(()=>{Xe&&($?(Ce(!0),Ye(!0),vt()):(Ge(),Ye(!1),Ce(!1)))},[$,Xe,vt,Ge,Ye,Ce]),e.useEffect(()=>{An("dropdownlist")},[]),e.useEffect(()=>{xe.current===null&&(xe.current=JSON.stringify(s.dataSource)??null),He.current===null&&(He.current=JSON.stringify(s.fields)??null)},[]),e.useEffect(()=>{(JSON.stringify(s.dataSource)!==xe.current||JSON.stringify(s.fields)!==He.current)&&(xe.current=JSON.stringify(s.dataSource)??null,He.current=JSON.stringify(s.fields)??null,Re.current=null,ye!=null&&ye.current&&(Qe(!1),ye.current=!1,$t()),u(!1))},[s.dataSource,s.fields]),e.useEffect(()=>{re||qe(!1)},[re]),e.useEffect(()=>{re&&se&&!ye.current&&Ct()},[re,se,Ct]);const Ut=e.useMemo(()=>!!p&&!se,[p,se]),nt=e.useMemo(()=>re?Ut||Ae&&!Ue:Ut||Oe,[re,Ut,Ae,Oe,Ue]),Jn=e.useMemo(()=>{const D=Kt("dropdownList",{placeholder:l},ue);return D.setLocale(ue),D.getConstant("placeholder")||l||""},[ue,l]),tn=D=>{if(Array.isArray(D.data)){const K=D.data.filter(J=>J!=null&&(typeof J=="string"||typeof J=="number"||typeof J=="object"));Re.current=K}else Re.current=null;Le==null||Le(D),Qe(!0)},nn=e.useMemo(()=>({dataSource:ce,query:t,fields:ne,value:o,placeholder:l,id:x,popupSettings:M,allowObjectBinding:h,itemTemplate:T,headerTemplate:R,valueTemplate:N,groupTemplate:L,noRecordsTemplate:z,footerTemplate:w,labelMode:y,open:$,skipDisabledItems:b,ignoreCase:B,ignoreAccent:H,filterable:A,filterType:_,filterPlaceholder:W,sortOrder:f,clearButton:V,dropdownIcon:ae,loading:p,size:i,variant:m}),[ce,ne,o,l,x,M,h]),Kn=e.useMemo(()=>["sf-input-group sf-control","sf-ddl",nt?"sf-loading":"",me==="rtl"?"sf-rtl":"",S?"sf-readonly":"",k?"sf-disabled":"",y!=="Never"?hs.FLOATINPUT:"",et?"sf-input-focus":"",!fe&&he?"sf-error":"",i===Ee.Small?"sf-small":i===Ee.Large?"sf-large":"sf-medium",m&&m.toLowerCase()!=="standard"?m.toLowerCase()==="outlined"?"sf-outline":`sf-${m.toLowerCase()}`:"",g].filter(Boolean).join(" "),[nt,S,k,me,et,fe,he,i,m,g]),sn=e.useMemo(()=>!!(N&&Te),[N,Te]),Qn=e.useMemo(()=>n.jsx(Un,{ref:X,dataSource:ce,itemData:$e,fields:ne,query:t,ignoreAccent:H,ignoreCase:B,isDropdownFiltering:A,filterPlaceholder:W,filterType:_,size:i,sortOrder:f,allowObjectBinding:h,onItemClick:en,itemTemplate:T,headerTemplate:R,footerTemplate:w,groupTemplate:L,noRecordsTemplate:Ae?null:z,value:Se,keyActionHandler:Pt,onError:zn,onErrorTemplate:Je,onFilter:ge,onRemoteDataLoaded:Ot,onDataRequest:oe,onDataLoad:tn,listId:Fe,getOptionId:mt,activeIndex:Me,id:x,debounceDelay:C,endRemoteRequest:we,remoteCacheRef:Re,virtualization:j,onScroll:We},"list-view"),[X,ce,ne,t,H,B,A,W,_,i,f,en,T,R,w,L,Ae,z,Se,Pt,Z,Je,ge,Ot,oe,Le,Fe,x,mt,Me,C,we,Re,tn,j,We]);e.useImperativeHandle(a,()=>({...nn,element:Be.current,filter:Yn}),[nn]);const Yn=e.useCallback((D,K,J)=>{X.current&&X.current.filter(D,K,J||s.fields)},[s.fields]),Xn=e.useCallback(D=>{be(D.target.value)},[be]),Zn=e.useCallback(()=>{var K,J;Ce(!0);const D=(K=Be.current)==null?void 0:K.value.length;D&&((J=Be.current)==null||J.setSelectionRange(D,D))},[se,Me,Ce,X,v]),es=e.useCallback(D=>{D.preventDefault(),D.stopPropagation(),be(""),ke(null),v(null),F(null),U(null),E&&E({event:D,previousItemData:$e,value:null,itemData:null})},[E,$e,be,ke,v,F,U]),rn=e.useCallback(()=>{Ce(!1)},[Ce]),ts=e.useCallback(D=>{var J;if(k)return;const K=D.relatedTarget;(J=Be.current)!=null&&J.contains(K)||rn(D)},[k,rn]),ns=e.useCallback(()=>n.jsx(Gs,{valueTemplate:N,dropdownValue:Se,dataSource:Array.isArray(ce)?ce:[],fields:ne,allowObjectBinding:h,onRenderedChange:je}),[N,Se,ce,ne,h]),ss=e.useCallback(D=>{if(D.button===2||k)return;const K=D.target instanceof Element?D.target:null;K&&K.parentElement&&K.parentElement.matches(".sf-clear-icon")||(ee(D),re&&se&&we())},[we,k,se,re,ee]),rs=e.useCallback(async()=>{if(!re||ye.current)return null;const D=ce;try{Ct(),oe==null||oe({data:D,query:t??new pe});const K=await D.executeQuery(t??new pe),J=Array.isArray(K==null?void 0:K.result)?K.result:[];return ye.current=!0,Le==null||Le({data:J}),we(),J}catch(K){return we(),Z==null||Z(K),null}},[re,ce,t,Ct,we,oe,Le,Z]);return n.jsxs(n.Fragment,{children:[n.jsxs("span",{ref:_e,className:Kn,tabIndex:-1,onMouseDown:ss,onKeyDown:Pt,...pt,children:[N&&n.jsx("span",{className:`sf-input-value ${sn?"sf-content":"sf-display-none"}`,children:ns()}),n.jsx(Hn,{id:x,ref:Be,className:`${me==="rtl"?"sf-rtl":""} ${fe?"sf-valid-input":""} sf-dropdown-list ${sn?"sf-input-value-template":""}`,type:"text",value:Ze||"","aria-haspopup":"listbox","aria-label":"dropdownlist","aria-disabled":k,"aria-readonly":S,placeholder:Jn,floatLabelType:y,onChange:Xn,onFocus:Zn,onBlur:ts,...bt,...Ve,readOnly:!0,required:d}),y!=="Never"&&xs(y,et,Ze||"",l,x),V&&Bn(Ze&&(et||se)?Ze:"",es),!nt&&n.jsx("span",{ref:Vt,id:le,"aria-hidden":"true",className:`sf-input-icon sf-ddl-icon
                          ${nt?"":"sf-icon-container"} 
                          ${!nt&&se?"sf-icon-rotate":"sf-icon-normal"} 
                          ${i===Ee.Small?"sf-small":i===Ee.Large?"sf-large":"sf-medium"}`,children:ae??At}),nt&&n.jsx(Qt,{size:i===Ee.Small?"16px":"20px",visible:!0})]}),se&&typeof document<"u"&&is.createPortal(n.jsx(ys,{ref:yt,className:Gn,id:`${x}_popup`,relateTo:_e.current,width:qn(),height:"auto",position:Ie.position,zIndex:Ie.zIndex,collision:Ie.collision,open:se,autoReposition:Ie.autoReposition,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},offsetX:Ie.offsetX,offsetY:Ie.offsetY,style:{maxHeight:_n()},children:Qn}),document.body)]})});e.memo(Xt);const Qs=s=>{const{dropdownValue:a,inputElementRef:r,required:t,valid:c,validationMessage:o}=s,l=e.useMemo(()=>c!==void 0?!!c:t?a!=null:!0,[c,t,a]);return e.useEffect(()=>{const x=l?"":o||"",k=(r==null?void 0:r.current)??void 0;k&&typeof k.setCustomValidity=="function"&&k.setCustomValidity(x)},[l,o,r]),{isInputValid:l}},Pn=(s,a,r,t)=>{const c=s.length>0&&(typeof s[0]=="string"||typeof s[0]=="number"||typeof s[0]=="boolean");if(c||!a.groupBy)if(c&&r!==rt.None){const o=[...s];return r===rt.Ascending?o.sort((l,x)=>String(l).localeCompare(String(x))):r===rt.Descending&&o.sort((l,x)=>String(x).localeCompare(String(l))),o}else{const o=On(r,(a==null?void 0:a.text)||"text",t),l=$n(s,o);return l&&Array.isArray(l.result)?l.result:l}else return Cs(s,a,r)},Wn=s=>{switch(String(s??"")){case"StartsWith":return"startsWith";case"EndsWith":return"endsWith";case"Contains":return"contains";default:return"contains"}},Ys=(s,a,r)=>{if(Y(s)||!Array.isArray(a)||a.length===0)return-1;const t=(r==null?void 0:r.value)||"value",c=String(typeof s=="object"?Q(t,s):s);for(let o=0;o<a.length;o++){const l=a[o];if(!Y(l)&&!(typeof l=="object"&&(l!=null&&l.isHeader))){if(typeof l=="object"){const x=Q(t,l);if(!Y(x)&&String(x)===c)return o}else if(String(l)===c)return o}}return-1},ht=(s,a,r)=>{let t;return a==="value"?t=(r==null?void 0:r.value)??"value":t=(r==null?void 0:r.text)??"text",typeof s=="string"||typeof s=="number"||typeof s=="boolean"?s:typeof s=="object"&&s!==null?Q(t,s):""},Xs=s=>{const{isDropdownFiltering:a,ignoreCase:r,ignoreAccent:t,filterType:c,fields:o,dataSource:l,onFilter:x,setListData:k,baseQuery:S}=s,[M,h]=e.useState(""),[y,$]=e.useState(!1),b=e.useRef(null),P=s.externalTypedString!==void 0?s.externalTypedString:M,B=s.setExternalTypedString||h,H=s.externalFilterInputRef||b,A=e.useCallback((i,m)=>{if(H.current!=null&&H.current.value.trim()!==""){const I=m||S||new pe;if(!m){const T=Wn(c);Array.isArray(i)&&i.length>0&&(typeof i[0]=="string"||typeof i[0]=="number"||typeof i[0]=="boolean")?I.where("",T,H.current.value,r,t):I.where(o.text||"text",T,H.current.value,r,t)}k(i,I,!0,H.current.value)}else k(i,m||S||new pe,!0)},[c,o,r,t,k,S]),_=e.useCallback((i,m)=>{if(a&&H.current!=null){const I={preventDefaultAction:!1,text:m,event:i};x&&x(I),!y&&!I.preventDefaultAction&&l&&A(l,null)}},[a,A,x,y,l]),W=e.useCallback((i,m)=>{m&&m(i)},[]),C=e.useCallback((i,m,I)=>{var R;$(!0);const T=((R=H.current)==null?void 0:R.value)||P;if(T){const w=m||new pe;m||w.where((I==null?void 0:I.text)||"text","contains",T,r),A(i,w)}else A(i,m)},[P,r,A]),f=e.useCallback(i=>{B(i.target.value),_(i,i.target.value)},[_]),p=e.useCallback(i=>{i.preventDefault(),i.stopPropagation(),B(""),k(l,S||new pe,!0)},[B,k,l,S]);return{typedString:P,setTypedString:B,filterInputElementRef:H,onFilterUp:W,handleInputChange:f,searchLists:_,clearText:p,filter:C}},Lt=(s,a)=>s===null?null:e.isValidElement(s)?s:typeof s=="function"?s():null,Zs=({headerTemplate:s})=>n.jsx(n.Fragment,{children:Lt(s)}),er=e.memo(Zs),tr=({footerTemplate:s})=>n.jsx(n.Fragment,{children:Lt(s)}),nr=e.memo(tr),sr=({noRecordsTemplate:s,defaultText:a})=>{const r=n.jsx("div",{className:"sf-content sf-dd-base sf-dd-nodata",children:a}),t=Lt(s);return n.jsx(n.Fragment,{children:t??r})},rr=e.memo(sr),or=({errorTemplate:s,defaultText:a})=>{const r=n.jsx("div",{className:"sf-content sf-dd-base sf-dd-nodata",children:a}),t=Lt(s);return n.jsx(n.Fragment,{children:t??r})},lr=e.memo(or),ar={text:"text",value:"value",disabled:"disabled",groupBy:void 0,htmlAttributes:"htmlAttributes"},De={root:"sf-dd-base",content:"sf-content",selected:"sf-active",focus:"sf-item-focus",li:"sf-list-item",disabled:"sf-disabled",grouping:"sf-dd-group",hover:"sf-hover",noData:"sf-dd-nodata"},Un=e.forwardRef((s,a)=>{const{dataSource:r=[],fields:t=ar,value:c,query:o,isDropdownFiltering:l=!1,filterPlaceholder:x="",ignoreCase:k,ignoreAccent:S,filterType:M="StartsWith",size:h=Ee.Medium,itemTemplate:y,groupTemplate:$,headerTemplate:b,footerTemplate:P,sortOrder:B=rt.None,noRecordsTemplate:H,onErrorTemplate:A,allowObjectBinding:_=!1,activeIndex:W,id:C,debounceDelay:f=0,remoteCacheRef:p,itemData:i,virtualization:m,onError:I,onItemClick:T,onFilter:R,onRemoteDataLoaded:w,onDataRequest:L,onDataLoad:N,getOptionId:z,endRemoteRequest:V,onScroll:ae}=s,{locale:te}=Jt(),he=Kt("dropdownList",{noRecordsMessage:"No Records Found",errorMessage:"Request Failed"},te||"en-US"),d=(o==null?void 0:o.clone())??new pe,[g,j]=e.useState([]),[E,O]=e.useState(!1),[q,Z]=e.useState(!1),[ge,oe]=e.useState(null),[Le,We]=e.useState(null),[Je,pt]=e.useState(""),[At,ce]=e.useState(!1),ne=e.useRef([]),Ve=e.useRef(null),Xe=e.useRef(Je),Te=e.useRef(null),je=e.useRef(null),xt=e.useRef(null),Ke=e.useCallback(u=>{let v;if(l){v=u.clone();const F=Xe.current??"";if(F!==""){const G=Wn(M),U=xe(r).typeof;if(!(r instanceof Pe)&&(U==="string"||U==="number"||U==="boolean"))v.where("",G,F,k,S);else{const re=t!=null&&t.text?t.text:"text";v.where(re,G,F,k,S)}}}else v=u.clone();return v.clone()},[o,l,M,k,S,t]),Ue=e.useCallback(u=>{q||Z(!0);const v=Pn(u,t,B,o??new pe);j(v)},[t,B,o,q]),Qe=e.useCallback(u=>{if(!(r instanceof Pe)||!(p!=null&&p.current)||!u)return;const v=Array.from(p==null?void 0:p.current),F=typeof u=="string"||typeof u=="number"||typeof u=="boolean",G=String(F?u:Q(t.value,u));v.some(ee=>String(F?typeof ee!="object"&&ee:typeof ee=="object"&&Q(t.value,ee))===G)||(v.push(u),p.current=v)},[t,p]),Ae=e.useCallback((u,v,F,G)=>{var re;let U;Array.isArray(u)?U=u.filter(me=>me!=null):U=u,Xe.current=G??"";const ee={data:U,query:v};if(U instanceof Pe){const me=U;if(l&&!F&&Qe(i),p!=null&&p.current&&!F){const ue=p.current,le=new Pe(ue),fe=ee.query?ee.query:Ke(new pe);fe.queries.some(Ie=>Ie.fn==="onTake")&&(fe.queries=(re=fe==null?void 0:fe.queries)==null?void 0:re.filter(Ie=>Ie.fn!=="onTake"),fe.take(ue.length));const Fe=fe.executeLocal(le),bt={data:Fe&&Array.isArray(Fe.result)?Fe.result:Fe};N==null||N(bt),Ue(bt.data);return}E||(L==null||L({data:ee.data,query:v?ee.query:Ke(new pe)}),O(!0),ce(!1),me.executeQuery(ee.query?ee.query:Ke(new pe)).then(ue=>{const le=ue&&Array.isArray(ue.result)?ue.result:[];if(p&&!F&&(p.current=le),!ue.cancel){const fe={data:ue.result};F||N==null||N(fe),Ue(fe.data)}O(!1),ce(!1),w==null||w()}).catch(ue=>{O(!1),ce(!0),Z(!1),I==null||I(ue),V==null||V()}))}else{const me=new Pe(ee.data),le={data:Ke(ee.query||new pe).executeLocal(me)};N==null||N(le),Ue(le.data),O(!1),ce(!1)}},[E,Ke,B,I,A,w,L,N,Ue,Qe]),{onFilterUp:qe,handleInputChange:_e,clearText:Be,filter:yt}=Xs({isDropdownFiltering:l,ignoreCase:k,ignoreAccent:S,filterType:M,fields:t,dataSource:r,baseQuery:d,onFilter:R,setListData:Ae,externalTypedString:Je,setExternalTypedString:pt,externalFilterInputRef:Ve}),X=e.useMemo(()=>{const u=Array.isArray(g)&&g.length>0&&(typeof g[0]=="string"||typeof g[0]=="number"||typeof g[0]=="boolean");return[De.content,De.root,!u&&t.groupBy?De.grouping:"",g.length===0?"sf-dd-nodata":""].filter(Boolean).join(" ")},[t.groupBy,g]),Vt=n.jsx(rr,{noRecordsTemplate:H,defaultText:he.getConstant("noRecordsMessage")}),Bt=n.jsx(lr,{errorTemplate:A,defaultText:he.getConstant("errorMessage")});e.useEffect(()=>{if(c!=null&&g.length>0){const u=new Map;g.forEach((F,G)=>{const U=String(typeof F=="object"?Q(t.value??"",F):F);u.set(U,G)});const v=u.get(String(c))??-1;v!==-1&&oe(v)}else c==null&&oe(null)},[c,g,t]),e.useEffect(()=>{l&&Ve.current&&Ve.current.focus({preventScroll:!0})},[l,Ve.current]),e.useEffect(()=>{(!q||xt.current!==JSON.stringify(r))&&(xt.current=JSON.stringify(r)??null,Ae(r,o))},[r,o,q]),e.useEffect(()=>{g.length>0?We(W||0):We(null)},[g,W]),e.useEffect(()=>()=>{je.current&&(clearTimeout(je.current),je.current=null)},[]);const Re=e.useCallback((u,v)=>{var ue;const F=(ue=Te==null?void 0:Te.current)==null?void 0:ue.parentElement,G=F.style.display;F.style.visibility="hidden",F.style.display="block";const U=v.offsetTop,ee=U+v.offsetHeight,re=u.scrollTop,me=u.scrollTop+u.clientHeight;ee>me?u.scrollTop=ee-u.clientHeight:U<re&&(u.scrollTop=Math.max(0,U)),F.style.visibility="",F.style.display=G},[Te]);e.useEffect(()=>{if(!q||Y(i))return;const u=typeof i=="object"&&i!==null?Q((t==null?void 0:t.value)??"value",i):i;if(Y(u))return;const v=Oe(),F=v==null?void 0:v.find(U=>{var ee;return((ee=U==null?void 0:U.dataset)==null?void 0:ee.value)===String(u)}),G=Me();if(F&&G)Re(G,F);else if(m&&G){const U=Ys(i,g,t);U!==-1&&Nt(U,G)}},[q]);const xe=e.useCallback(u=>{let v={typeof:null,item:null};if(!Array.isArray(u)||u.length===0)return v;for(let F=0;F<u.length;F++)if(u[F]!==null&&u[F]!==void 0&&!(typeof u[F]=="string"||typeof u[F]=="number"||typeof u[F]=="boolean"?Y(u[F]):Y(Q(t.value,u[F]))))return v={typeof:typeof u[F],item:u[F]};return v},[t]),He=e.useCallback(u=>{if(g&&g.length){const v=xe(g);if(typeof Q(t.value,v.item)=="number"||v.typeof==="number")return parseFloat(u);if(typeof Q(t.value,v.item)=="boolean"||v.typeof==="boolean")return u==="true"||""+u=="true"}return u},[g,t,xe]),ye=e.useCallback(u=>{if(!Y(g)){const v=xe(g).typeof;if(v==="string"||v==="number"||v==="boolean")for(let F=0;F<g.length;F++){const G=g[F];if(!Y(G)&&String(G)===String(u))return G}else for(let F=0;F<g.length;F++){const G=g[F];if(!Y(G)&&String(Q(t.value,G))===String(u))return G}}},[g,t,xe]),Ht=e.useCallback((u,v,F)=>Y(u)?!1:F?String(u).toLowerCase()===(v==null?void 0:v.toString().toLowerCase()):String(u)===(v==null?void 0:v.toString()),[]),St=e.useCallback((u,v)=>{if(!Y(g)){const G=g.find(U=>!Y(Q(t.value,U))&&Ht(String(Q(t.value||"",U)),u,v));return G?Q(t.text||t.value,G):null}return null},[g,t,xe]),se=e.useCallback(u=>{const v=xe(r).typeof;return v==="string"||v==="number"||v==="boolean"?u.toString():St(u,!!k)||""},[St,xe,r]),gt=e.useCallback(u=>{var F;const v=((F=u.event.currentTarget.dataset)==null?void 0:F.value)??null;if(v){let G;const U=xe(r).typeof;U==="string"||U==="number"||U==="boolean"?G=v:G=ye(He(v)),G&&se(v)}oe(u.index),We(null),T==null||T(u.event,u.index)},[ye,He,se,T,xe,r]),Se=e.useCallback(u=>{let v="",F="",G=!1;if(c!==null)if(typeof u.item=="string"||typeof u.item=="number"||typeof u.item=="boolean")v=F=String(u.item),G=String(u.item)===String(c);else if(v=String(Q(t.value||"",u.item)),F=String(Q(t.text||t.value||"",u.item)),_){const le=t==null?void 0:t.value,fe=le&&typeof c=="object"&&c!==null?c[le]:void 0;G=v===String(fe??"")}else G=v===String(c);let U=ge!==null?u.index===ge:G;try{const le=i;if(le!=null){const fe=String(typeof le=="object"?Q(t.value||"value",le):le),Fe=String(typeof le=="object"?Q(t.text||t.value||"",le):le);U=String(v)===fe&&String(F)===Fe}}catch{U=!1}const ee=i?!1:(g==null?void 0:g[0]).isHeader?u.index===1:u.index===0,re=t.disabled&&typeof u.item=="object"&&Q(t.disabled,u.item)===!0,me=[U?De.selected:"",ee?De.focus:"",re?De.disabled:""].filter(Boolean).join(" "),ue=`${C}-option-${u.index}`;return{className:me,id:z?z(u.index):ue,"aria-selected":U?"true":"false","aria-disabled":re?"true":"false",ref:le=>{ne.current[u.index]=le}}},[g,ge,X,c,t,De,Le,i]),Ze=e.useMemo(()=>!t||Object.keys(t).length===0?t:Object.keys(t).length>0?{id:t==null?void 0:t.value,text:t==null?void 0:t.text,groupBy:t==null?void 0:t.groupBy,disabled:t==null?void 0:t.disabled,htmlAttributes:t==null?void 0:t.htmlAttributes}:t,[t]),et=e.useMemo(()=>n.jsx(Us,{getItemProps:Se,items:g,parentClass:X,itemTemplate:y,groupTemplate:$,fields:Ze,ariaAttributes:{itemRole:"option",listRole:"listbox",groupItemRole:"presentation"},onSelect:gt,virtualization:m,onScrollRequest:ae,disableDefaultInteractions:!0}),[X,y,$,g,gt,Se,t,i]),Oe=e.useCallback(()=>(t.groupBy||y)&&Te.current?Array.from(Te.current.getElementsByClassName(De.li)):ne.current.filter(Boolean),[t.groupBy,y,De.li]),Me=e.useCallback(()=>{const u=Te.current;if(!u)return null;const v=u.querySelector(".sf-ul");return v||null},[]),$e=e.useCallback(()=>g,[g,Ae]),tt=e.useCallback(u=>{var G;let v=-1;const F=Oe();for(let U=0;U<F.length;U++){const ee=((G=F[U].dataset)==null?void 0:G.value)??null;if(!Y(u)&&!Y(ee)&&String(ee)===String(u)){v=U;break}}return v},[Oe]);e.useImperativeHandle(a,()=>({getFormattedValue:He,getDataByValue:ye,getIndexByValue:tt,getTextByValue:se,getScrollContainer:Me,getListItems:Oe,getFilteredListData:$e,filterType:M,filter:yt}),[He,ye,tt,se,Oe,g,Me]);const Ye=u=>u==="ArrowUp"||u==="ArrowDown"||u==="Home"||u==="End"||u==="PageUp"||u==="PageDown",ke=e.useCallback(u=>{var v;if(f&&f>0){const F=(v=Ve.current)==null?void 0:v.value;je.current&&(clearTimeout(je.current),je.current=null),pt(F),je.current=window.setTimeout(()=>{_e(u),clearTimeout(je.current),je.current=null},f)}else _e(u)},[f,_e,Ve,je,pt]),be=e.useCallback(u=>{u.key!=="Enter"&&!Ye(u.key)&&qe(u,s.keyActionHandler)},[qe,s.keyActionHandler]),Ce=e.useCallback(u=>{var v;if(u.key==="Enter"){u.stopPropagation(),qe(u,s.keyActionHandler);return}if(Ye(u.key)){u.preventDefault(),u.stopPropagation(),(v=s.keyActionHandler)==null||v.call(s,u);return}},[qe,s.keyActionHandler]);return n.jsx(n.Fragment,{children:q?n.jsxs("div",{className:h===Ee.Small?"sf-small":h===Ee.Large?"sf-large":"sf-medium",ref:Te,children:[l&&n.jsx("span",{className:"sf-ddl-filter-parent",children:n.jsxs("span",{className:`sf-input-group sf-control sf-input-focus ${h===Ee.Small?"sf-small":h===Ee.Large?"sf-large":"sf-medium"}`,children:[n.jsx(Hn,{name:C+"_filter",ref:Ve,type:"text",value:Je,className:"sf-input-filter",placeholder:x,title:"Filter",onChange:ke,onKeyUp:be,onKeyDown:Ce}),E?n.jsx(Qt,{size:h===Ee.Small?"16px":"20px",visible:!0}):Bn(Je,Be)]})}),b&&n.jsx("div",{className:"sf-dd-header",children:n.jsx(er,{headerTemplate:b})}),g.length===0?Vt:et,P&&n.jsx("div",{className:"sf-dd-footer",children:n.jsx(nr,{footerTemplate:P})})]}):At&&n.jsx("div",{className:De.root+" "+De.content+" "+De.noData,children:Bt})})});e.memo(Un);Kt.load({"en-US":{scheduler:{save:"Add",cancel:"Close",delete:"Remove",newEvent:"Add Event"}}});const ir=({locale:s="en-US"})=>{const a=e.useRef(null),r={dataSource:ft,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}};return n.jsx("div",{className:"control-section",children:n.jsx("div",{className:"scheduler-control",children:n.jsx(lt,{locale:s,children:n.jsxs(at,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,children:[n.jsx(it,{}),n.jsx(ct,{}),n.jsx(ut,{}),n.jsx(dt,{})]})})})})},br={title:"Scheduler/Editor Window",parameters:{layout:"padded",docs:{description:{component:"Meta configuration for the Storybook stories"}}},tags:["autodocs"]},Dt={render:s=>n.jsx(ir,{...s})},cr=({locale:s="en-US"})=>{const a=e.useRef(null),r={dataSource:ft,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},t=c=>{const o=()=>{console.log("Custom save clicked"),c.onClose()},l=n.jsx("div",{style:{padding:"10px",backgroundColor:"rgb(103, 80, 164)",color:"white"},children:"Create/Edit Appointment"}),x=n.jsxs(n.Fragment,{children:[n.jsx(fn,{variant:qt.Standard,onClick:o,children:"Save Appointment"}),n.jsx(fn,{variant:qt.Standard,onClick:c.onClose,children:"Cancel"})]});return n.jsx(ot,{...c,header:l,footer:x})};return n.jsx("div",{className:"control-section",children:n.jsx("div",{className:"scheduler-control",children:n.jsx(lt,{locale:s,children:n.jsxs(at,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:t,children:[n.jsx(it,{}),n.jsx(ct,{}),n.jsx(ut,{}),n.jsx(dt,{})]})})})})},Et={render:s=>n.jsx(cr,{...s})},ur=({locale:s="en-US"})=>{const a=e.useRef(null),r={dataSource:ft,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly",priority:"Priority"}},t=c=>{var S;const{editor:o}=c,l=[{Id:"game1",Game:"Badminton"},{Id:"game2",Game:"Football"},{Id:"game3",Game:"Tennis"}],x={text:"Game",value:"Id"},k=[{name:"subject",label:"Event Title",visible:!0,props:{labelMode:"Auto"}},{name:"location",label:"Meeting Location",visible:!0,props:{labelMode:"Auto"}},{name:"startDate",label:"Start Date",visible:!0},{name:"startTime",label:"Start Time",visible:!0},{name:"endDate",label:"End Date",visible:!0},{name:"endTime",label:"End Time",visible:!0},{name:"isAllDay",label:"All Day Event",visible:!0},{name:"description",label:"Notes",visible:!1},{name:"priority",label:"Priority",visible:!0,component:n.jsx(Xt,{id:"priority",placeholder:"Select a game",dataSource:l,fields:x,value:((S=o==null?void 0:o.customValues)==null?void 0:S.priority)??null,onChange:M=>{var h;(h=o==null?void 0:o.setCustomValue)==null||h.call(o,"priority",M.value)},style:{width:"300px"},className:"custom-editor-dropdownlist"})}];return n.jsx(ot,{...c,fields:k,dialogProps:{header:"Appointment Details",width:"600px",minHeight:"400px"}})};return n.jsx("div",{className:"control-section",children:n.jsx("div",{className:"scheduler-control",children:n.jsx(lt,{locale:s,children:n.jsxs(at,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:t,children:[n.jsx(it,{}),n.jsx(ct,{}),n.jsx(ut,{}),n.jsx(dt,{})]})})})})},Tt={render:s=>n.jsx(ur,{...s})},dr=({locale:s="en-US"})=>{const a=e.useRef(null),r={dataSource:ft,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},t=o=>n.jsx(ot,{...o,dialogProps:{header:"Quick Event Editor",width:"400px"}}),c=o=>n.jsx(ot,{...o,dialogProps:{header:"Detailed Event Editor (Month View)",width:"650px"}});return n.jsx("div",{className:"control-section",children:n.jsx("div",{className:"scheduler-control",children:n.jsx(lt,{locale:s,children:n.jsxs(at,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:t,children:[n.jsx(it,{}),n.jsx(ct,{}),n.jsx(ut,{}),n.jsx(dt,{editor:c})]})})})})},Rt={render:s=>n.jsx(dr,{...s})},fr=({locale:s="en-US"})=>{const a=e.useRef(null),r={dataSource:ft,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},t=c=>{const o=n.jsx(Ne,{name:"subject",children:n.jsx(_t,{placeholder:"Enter event title...",value:c.editor.subject||"",onChange:k=>c.editor.handleSubjectChange(k),className:"custom-subject-field",labelMode:"Always"})}),l=n.jsx(Ne,{name:"startDate",children:n.jsx(Gt,{placeholder:"Select start date",value:c.editor.startDateOnly,onChange:c.editor.handleStartDateChange,className:"custom-date-field",labelMode:"Always"})}),x=[{name:"subject",component:o},{name:"location",visible:!0},{name:"startDate",component:l},{name:"startTime",visible:!0},{name:"endDate",visible:!0},{name:"endTime",visible:!0},{name:"isAllDay",visible:!0},{name:"description",visible:!1}];return n.jsx(ot,{...c,fields:x,dialogProps:{header:"Custom Field Components",width:"600px"}})};return n.jsx("div",{className:"control-section",children:n.jsx("div",{className:"scheduler-control",children:n.jsx(lt,{locale:s,children:n.jsxs(at,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:t,children:[n.jsx(it,{}),n.jsx(ct,{}),n.jsx(ut,{}),n.jsx(dt,{})]})})})})},Mt={render:s=>n.jsx(fr,{...s})},pr=({locale:s="en-US"})=>{const a=e.useRef(null),r={dataSource:ft,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",priority:"Priority"}},t=[{Id:"game1",Game:"Badminton"},{Id:"game2",Game:"Football"},{Id:"game3",Game:"Tennis"},{Id:"game4",Game:"Cricket"}],c={text:"Game",value:"Id"},o=l=>{const{editor:x}=l,{subject:k,location:S,description:M,isAllDay:h,startDateOnly:y,startTimeOnly:$,endDateOnly:b,endTimeOnly:P,handleSubjectChange:B,handleLocationChange:H,handleDescriptionChange:A,handleStartDateChange:_,handleStartTimeChange:W,handleEndDateChange:C,handleEndTimeChange:f,handleIsAllDayChange:p,customValues:i,setCustomValue:m}=x;return n.jsx(ot,{...l,dialogProps:{header:x.mode==="event"?"Edit Event":"New Event",width:"680px",minHeight:"520px"},children:n.jsx("div",{style:{padding:"16px"},children:n.jsxs(Ss,{id:"customEventForm",rules:{},children:[n.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"20px"},children:[n.jsx(Ne,{name:"subject",children:n.jsx(_t,{value:k||"",onChange:B,placeholder:"Enter event title"})}),n.jsx(Ne,{name:"location",children:n.jsx(_t,{placeholder:"Location",value:S||"",onChange:H})})]}),n.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"20px",flexWrap:"wrap"},children:[n.jsx(Ne,{name:"startDate",children:n.jsx(Gt,{placeholder:"Start Date",value:y,onChange:_,format:"dd MMM yyyy"})}),!h&&n.jsx(Ne,{name:"startTime",children:n.jsx(pn,{placeholder:"Start Time",value:$,onChange:W,format:"HH:mm",step:30})}),n.jsx(Ne,{name:"endDate",children:n.jsx(Gt,{placeholder:"End Date",value:b,onChange:C,format:"dd MMM yyyy"})}),!h&&n.jsx(Ne,{name:"endTime",children:n.jsx(pn,{placeholder:"End Time",value:P,onChange:f,format:"HH:mm",step:30})})]}),n.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",marginBottom:"20px"},children:[n.jsx(Ne,{name:"isAllDay",children:n.jsx(bs,{label:"All Day",checked:h,onChange:p})}),n.jsx(Ne,{name:"sport",children:n.jsx(Xt,{id:"priority",placeholder:"Select a game",dataSource:t,fields:c,value:(i==null?void 0:i.priority)??null,onChange:I=>{m==null||m("priority",I.value)},style:{width:"300px"},className:"custom-editor-dropdownlist"})})]}),n.jsx(Ne,{name:"description",children:n.jsx(vs,{value:M||"",onChange:A,rows:4,placeholder:"Enter event details, participants, etc."})})]})})})};return n.jsx("div",{className:"control-section",children:n.jsx("div",{className:"scheduler-control",children:n.jsx(lt,{locale:s,children:n.jsxs(at,{ref:a,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:o,children:[n.jsx(it,{}),n.jsx(ct,{}),n.jsx(ut,{}),n.jsx(dt,{})]})})})})},Ft={render:s=>n.jsx(pr,{...s})};var xn,yn,Sn;Dt.parameters={...Dt.parameters,docs:{...(xn=Dt.parameters)==null?void 0:xn.docs,source:{originalSource:`{
  render: args => <HeaderFooter {...args} />
}`,...(Sn=(yn=Dt.parameters)==null?void 0:yn.docs)==null?void 0:Sn.source}}};var bn,vn,Cn;Et.parameters={...Et.parameters,docs:{...(bn=Et.parameters)==null?void 0:bn.docs,source:{originalSource:`{
  render: args => <CustomHeaderFooter {...args} />
}`,...(Cn=(vn=Et.parameters)==null?void 0:vn.docs)==null?void 0:Cn.source}}};var jn,kn,In;Tt.parameters={...Tt.parameters,docs:{...(jn=Tt.parameters)==null?void 0:jn.docs,source:{originalSource:`{
  render: args => <CustomFieldsExample {...args} />
}`,...(In=(kn=Tt.parameters)==null?void 0:kn.docs)==null?void 0:In.source}}};var wn,Dn,En;Rt.parameters={...Rt.parameters,docs:{...(wn=Rt.parameters)==null?void 0:wn.docs,source:{originalSource:`{
  render: args => <ViewLevelOverride {...args} />
}`,...(En=(Dn=Rt.parameters)==null?void 0:Dn.docs)==null?void 0:En.source}}};var Tn,Rn,Mn;Mt.parameters={...Mt.parameters,docs:{...(Tn=Mt.parameters)==null?void 0:Tn.docs,source:{originalSource:`{
  render: args => <CustomComponentsExample {...args} />
}`,...(Mn=(Rn=Mt.parameters)==null?void 0:Rn.docs)==null?void 0:Mn.source}}};var Fn,Nn,Ln;Ft.parameters={...Ft.parameters,docs:{...(Fn=Ft.parameters)==null?void 0:Fn.docs,source:{originalSource:`{
  render: args => <CustomReactiveEditorExample {...args} />
}`,...(Ln=(Nn=Ft.parameters)==null?void 0:Nn.docs)==null?void 0:Ln.source}}};const vr=["HeaderAndFooter","CustomHeaderAndFooter","CustomFieldsWithLabels","ViewLevelEditorOverride","CustomFieldComponents","CustomFormsExample"];export{Mt as CustomFieldComponents,Tt as CustomFieldsWithLabels,Ft as CustomFormsExample,Et as CustomHeaderAndFooter,Dt as HeaderAndFooter,Rt as ViewLevelEditorOverride,vr as __namedExportsOrder,br as default};
