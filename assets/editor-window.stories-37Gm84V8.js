import{j as t,r as fs}from"./index-7s7xaQU8.js";import{r as e}from"./index-CC6F48bw.js";import{C as ps,p as On,o as $n,Q as pe,q as ft,e as Pe,r as ms,s as Y,t as Q,u as gs,v as Kt,w as hs,x as ys,y as xs,k as Ee,V as _t,z as Ss,A as Dt,n as Qt,E as vs,I as Pn,G as Cs,H as Wn,J as bs,P as Ze,S as et,D as tt,W as nt,a as st,M as rt,K as Ne,j as zt,N as Gt,R as Xe,X as js,T as pn,Y as ws,Z as Ds,_ as ks,B as mn}from"./month-view-DvDVUU6T.js";import{d as ot}from"./dataSource-BWyO54eK.js";/* empty css               */import"./index-qiR4Kxfn.js";var Ge;(function(s){s.Circular="Circular",s.Cupertino="Cupertino",s.SingleCircle="SingleCircle",s.DoubleCircle="DoubleCircle"})(Ge||(Ge={}));const Yt=e.forwardRef((s,l)=>{const{className:r,label:n="",visible:c=!0,thickness:a="3px",animationDuration:o="1s",color:h=ps.Primary,size:S="36px",overlay:v=!1,type:F=Ge.Circular,children:y,...x}=s,A=e.useRef(null);e.useEffect(()=>{On("spinner")},[]);const C=36,P=e.useMemo(()=>({label:n,visible:c,thickness:a,animationDuration:o,color:h,size:S,overlay:v,type:F}),[n,c,a,o,h,S,v,F]);e.useImperativeHandle(l,()=>({...P,element:A.current}),[P]);const V=({thickness:k,duration:L})=>e.useMemo(()=>{const G=(C-k)/2,H=2*Math.PI*G;return t.jsx("svg",{viewBox:`0 0 ${C} ${C}`,children:t.jsx("circle",{cx:C/2,cy:C/2,r:(C-k)/2,strokeWidth:k,strokeDasharray:H,strokeDashoffset:H*.25,strokeLinecap:"round",fill:"none",className:"sf-spinner-circle-inner",style:{animation:`spinner-rotate ${L} linear infinite`}})})},[k,L,C]),O=({duration:k,thickness:L})=>{const N=e.useMemo(()=>{const H=C/2-C*.1,le=L,te=C*.15,ie=360/12;return Array.from({length:12},(he,d)=>{const m=ie*d,D=(d+1)/12;return t.jsx("line",{x1:C/2,y1:C/2-H,x2:C/2,y2:C/2-H+te,className:"sf-spinner-cupertino-dots-inner",strokeWidth:le,strokeLinecap:"round",opacity:D,transform:`rotate(${m} ${C/2} ${C/2})`},d)})},[L]);return t.jsx("svg",{viewBox:`0 0 ${C} ${C}`,className:"sf-spinner-cupertino-dots",style:{animation:`spinner-rotate ${k} linear infinite`},children:N})},B=({thickness:k,duration:L})=>{const{outerCircleRadius:N,innerCircleRadius:G,outerDashLength:H,innerDashLength:le}=e.useMemo(()=>{const te=(C-k)/2,ie=(C-k*5)/2,he=2*Math.PI*te,d=2*Math.PI*ie,m=4,D=he/(m*2),T=d/(m*2);return{outerCircleRadius:te,innerCircleRadius:ie,outerDashLength:D,innerDashLength:T}},[k,C]);return t.jsxs(t.Fragment,{children:[t.jsx("svg",{viewBox:`0 0 ${C} ${C}`,className:"sf-spinner-doublecircle-inner",children:t.jsx("circle",{cx:C/2,cy:C/2,r:N,strokeWidth:k,fill:"none",strokeDasharray:`${H} ${H}`,strokeLinecap:"round",style:{animation:`spinner-dash ${L} linear infinite`}})}),t.jsx("svg",{viewBox:`0 0 ${C} ${C}`,className:"sf-spinner-doublecircle-second-inner",children:t.jsx("circle",{cx:C/2,cy:C/2,r:G,strokeWidth:Math.max(1,k-1),fill:"none",strokeDasharray:`${le} ${le}`,strokeLinecap:"round",style:{animation:`spinner-dash ${L} linear infinite`}})})]})},_=({thickness:k,duration:L})=>e.useMemo(()=>{const G=(C-k)/2,te=2*Math.PI*G/(8*2);return t.jsx("svg",{viewBox:`0 0 ${C} ${C}`,children:t.jsx("circle",{cx:C/2,cy:C/2,r:G,strokeWidth:k,fill:"none",className:"sf-spinner-singlecircle-inner",strokeDasharray:`${te} ${te}`,strokeLinecap:"round",style:{animation:`spinner-rotate ${L} linear infinite`}})})},[k,L]),W=k=>{if(typeof k!="string")return"1s";const L=["ms","s"];for(const N of L)if(k.endsWith(N)){const G=k.slice(0,-N.length),H=parseFloat(G);if(!isNaN(H))return`${H}${N}`}return"1s"},b=h,f=Math.max(1,parseFloat(a)||3),p=e.useMemo(()=>W(o),[o]),i=e.useMemo(()=>{if(y!=null)return y;switch(F){case Ge.Cupertino:return t.jsx(O,{thickness:f,duration:p});case Ge.DoubleCircle:return t.jsx(B,{thickness:f,duration:p});case Ge.SingleCircle:return t.jsx(_,{thickness:f,duration:p});case Ge.Circular:default:return t.jsx(V,{thickness:f,duration:p})}},[y,F,b,f,p]),g=$n(S),j=e.useMemo(()=>({width:g,height:g}),[g]),I=e.useMemo(()=>`sf-spinner${v?" sf-spinner-overlay":""} sf-control${r?" "+r:""} sf-spinner-${String(h).toLowerCase()}`,[v,r,h]),E=e.useMemo(()=>F===Ge.DoubleCircle&&!y?"sf-spinner-doublecircle":"",[F,y]);return c?t.jsx("div",{ref:A,className:I,"aria-live":"polite",role:"status",...x,children:t.jsxs("div",{className:"sf-content-center sf-spinner-content ",children:[t.jsx("span",{className:E,style:j,children:i}),n?t.jsx("div",{className:"sf-spinner-label",children:n}):null]})}):null});Yt.displayName="Spinner";var Jt;(function(s){s.Left="Left",s.Right="Right"})(Jt||(Jt={}));function Is(s,l,r=ft.None){const n=[],c=ms({},Xt,l);if(c.groupBy){let a=new pe().group(String(c.groupBy));a=Un(r,"key",a),qn(s,a).forEach(h=>{const S={};S[String(c.text)]=h.key,S.isHeader=!0;let v=String(c.text);v==="id"&&(v="text",Object.assign(S,{text:h.key})),S[String(c.id)]=`group-list-item-${h.key?h.key.toString().trim():"undefined"}`,S.items=h.items,n.push(S),n.push(...h.items)})}return n}function Un(s,l,r=new pe){const n=r instanceof pe?r:new pe;return s==="Ascending"?n.sortBy(l,"ascending",!0):s==="Descending"?n.sortBy(l,"descending",!0):n.queries&&(n.queries=n.queries.filter(c=>c.fn!=="onSortBy")),n}function qn(s,l){return!s||!l?[]:new Pe(s).executeLocal(l)}function Es(s,l){const r={};if(Y(s))return s;if(typeof s=="string"||typeof s=="number"||typeof s=="boolean"){const n=s.toString();return r[l.text||"text"]=n,r[l.id||"id"]=s,r}else if(Y(s.isHeader)){for(const n of Object.keys(l))if(Object.prototype.hasOwnProperty.call(l,n)){const c=l[n],a=!Y(c)&&typeof c=="string"?Q(c,s):void 0;!Y(a)&&typeof c=="string"&&c.trim()&&(r[String(c)]=a)}if(!l.text&&l.id&&!Y(Q(l.id,s))){const n=l.id,c=Q(n,s);r.text=c}}else return s;return r}const Rs=s=>{if(!s)return 40;const l=s.querySelector(".sf-list-item"),r=l?l.offsetHeight:0;return typeof r=="number"&&r>0?r:40},Ts=(s,l)=>l?l.querySelector(`.sf-list-item[data-index="${s}"]`):null,Lt=(s,l)=>{!l||Y(s)||requestAnimationFrame(()=>{var n;const r=Ts(s,l);if(r)(n=r==null?void 0:r.scrollIntoView)==null||n.call(r,{block:"nearest",inline:"nearest"});else{const c=Rs(l);l.scrollTop=s*c}})},gn=(s,l,r)=>Math.max(l,Math.min(r,s)),kt=(s,l,r,n,c)=>{const a=Math.floor(l/Math.max(1,r)),o=gn(a-c,0,Math.max(0,s)),h=gn(o+n+c*2,0,s),S=o*r,v=Math.max(0,s*r);return{startIndex:o,endIndex:h,offsetY:S,totalHeight:v}},Fs=s=>s&&s.classList.contains("sf-list-item")&&!s.classList.contains("sf-list-group-item")&&!s.classList.contains("sf-disabled")&&!s.classList.contains("sf-display-none"),Ms="sf-list-group-item",Ns="sf-list-item",Ls="sf-level",As="sf-has-child",Vs="sf-disabled",Bs="sf-navigable",Hs=(s,l,r,n,c,a,o,h,S,v,F)=>{const y=e.useMemo(()=>({...Xt,...l}),[l]),x=e.useMemo(()=>Es(s,y),[s,y]),A=e.useMemo(()=>x[String(y.id)]||gs("listitem"),[x,y.id]),C=e.useMemo(()=>!!(Object.prototype.hasOwnProperty.call(s,"isHeader")&&x.isHeader),[s]),P=e.useMemo(()=>(x[String(y.child)]||[]).length>0,[x,y.child]),V=e.useMemo(()=>F||!!(x[String(y.checked)]&&x[String(y.checked)].toString()==="true"),[x,y.checked,F]),O=e.useMemo(()=>x[String(y.text)]||(y.id&&x[String(y.id)]?x[String(y.id)].toString():""),[y.text,y.id,x]),B=e.useMemo(()=>String(y.icon)in x&&!Y(x[String(y.icon)]),[x,y.icon]),_=e.useMemo(()=>!!x[String(y.imageUrl)],[x,y.imageUrl]),W=e.useMemo(()=>!!x[String(y.url)],[x,y.url]),b=e.useMemo(()=>!C&&c?typeof c=="function"?c(s):c:C&&a?typeof a=="function"?a(s):a:null,[C,a,c,s]),f=e.useMemo(()=>[C?Ms:Ns,C&&r===0?"sf-list-group-first-item":"",`${Ls}-${(o==null?void 0:o.level)??1}`,x&&!Y(x[String(y.disabled)])&&x[String(y.disabled)].toString()==="true"?Vs:"",P?As:"",h?"sf-checklist":"",(S?v??"":r===n?h?"sf-focused":"sf-active":"")||"",x&&x[String(y.url)]?Bs:"",x&&!Y(x[String(y.visible)])&&x[String(y.visible)].toString()==="false"?"sf-display-none":"",x&&h&&V?"sf-active":""].filter(Boolean).join(" ").trim(),[C,o==null?void 0:o.level,x,y.disabled,P,h,S,v,r,n,F]),p=e.useMemo(()=>{const g={className:f,role:(o==null?void 0:o.groupItemRole)!==""&&(o==null?void 0:o.itemRole)!==""?C?o==null?void 0:o.groupItemRole:o==null?void 0:o.itemRole:void 0,"aria-level":(o==null?void 0:o.groupItemRole)==="presentation"||(o==null?void 0:o.itemRole)==="presentation"||o==null?void 0:o.level};return Y(x)||Y(x[String(y.tooltip)])||(g.title=String(x[String(y.tooltip)])),g},[f,o,C,y,r,x]),i=e.useMemo(()=>{if(!x||!Object.prototype.hasOwnProperty.call(x,String(y.htmlAttributes))||!x[String(y.htmlAttributes)])return p;let g={...p};const j=x[String(y.htmlAttributes)],{className:I,style:E,...k}=j;return I&&(g.className=`${g.className||""} ${I}`.trim()),E&&(g.style={...g.style,...E}),g={...g,...k},g},[p,x,y.htmlAttributes]);return{mergedFields:y,fieldData:x,uid:A,grpLI:C,checked:V,liProps:i,displayText:O,hasChild:P,hasIcon:B,hasImage:_,hasUrl:W,templateContent:b,ariaAttributes:o}},Os="sf-list-icon",hn="sf-list-text",$s="sf-list-url",Ps="sf-list-img",Ws="sf-anchor-wrap",Us=e.memo(({item:s,fields:l,index:r,focusedIndex:n,parentClass:c,itemTemplate:a,groupTemplate:o,ariaAttributes:h,checkBox:S,checkBoxPosition:v,isChecked:F,as:y,onItemClick:x,onItemKeyDown:A,getItemProps:C,...P})=>{if(Y(s))return null;const{ripple:V}=Kt(),{rippleMouseDown:O,Ripple:B}=hs(V),{className:_,...W}=e.useMemo(()=>(C==null?void 0:C({item:s,index:r}))||{},[C,s,r]),b=Hs(s,l,r,n,a,o,h,S,c,_,F),f=y??"li",p=e.useCallback(L=>{x==null||x(L,r)},[x,r]),i=e.useCallback(L=>{A==null||A(L,r)},[A,r]),g={...b.liProps,...P,...W,onClick:p,onKeyDown:i,onMouseDown:O},j=()=>t.jsx("span",{className:hn,children:b.displayText}),I=()=>t.jsx(ys,{className:"sf-font-size-lg"}),E=({position:L})=>t.jsx(xs,{className:`sf-listview-checkbox sf-checkbox-${L.toLowerCase()}`,checked:b.checked}),k=()=>t.jsxs(t.Fragment,{children:[b.hasIcon&&t.jsx("div",{className:Os,children:b.fieldData[String(b.mergedFields.icon)]}),b.hasImage&&t.jsx("img",{className:Ps,src:String(b.fieldData[String(b.mergedFields.imageUrl)]),alt:"Icon"})]});return t.jsxs(f,{"data-value":b.uid,"data-index":r,...g,children:[b.templateContent?b.templateContent:t.jsxs(t.Fragment,{children:[c&&b.displayText,!c&&t.jsx("div",{className:"sf-list-text-content",children:b.hasUrl?t.jsx("a",{className:`${hn} ${$s}`,href:String(b.fieldData[String(b.mergedFields.url)]),children:t.jsxs("div",{className:Ws,children:[t.jsx(k,{}),b.displayText,b.hasChild&&t.jsx(I,{})]})}):t.jsxs(t.Fragment,{children:[t.jsx(k,{}),!b.fieldData.isHeader&&S&&(v==="Left"?t.jsxs(t.Fragment,{children:[t.jsx(E,{position:"Left"}),t.jsx(j,{}),b.hasChild&&t.jsx(I,{})]}):t.jsxs(t.Fragment,{children:[t.jsx(j,{}),t.jsx(E,{position:"Right"}),b.hasChild&&t.jsx(I,{})]})),!S&&t.jsxs(t.Fragment,{children:[t.jsx(j,{}),b.hasChild&&t.jsx(I,{})]})]})})]}),!b.grpLI&&V&&t.jsx(B,{})]},b.uid)}),qs=({checkBox:s,fields:l,listItemDatas:r,onSelect:n,setListItemDatas:c,scrollParent:a})=>{const[o,h]=e.useState(null),[S,v]=e.useState([]),F=f=>{const p=a!=null&&a.current&&"element"in a.current&&a.current.element?a.current.element:a==null?void 0:a.current;if(!p)return;const i=Math.max(0,Math.min(f,Math.max(0,(r==null?void 0:r.length)-1)));h(r[Number(i)]),Lt(i,p)},y=f=>{const p=l.disabled,i=f.isHeader===!0,g=p?f[String(p)]===!0||f[String(p)]==="true":!1,j=f[String(l.visible)]===!0;return!i&&!g&&!j},x=e.useCallback((f,p,i)=>{const g={data:p,event:f,selected:!0,index:i},j=(l==null?void 0:l.id)||"id",I=o?Math.max(0,r.findIndex(E=>String(E[String(j)])===String(o[String(j)])))===i:!1;if(n==null||n(g,I),!p[String(l.child)]){const E=p[String(j)].toString();v([E.toString()]),h(p)}},[n,c,r,o,l]),A=e.useCallback((f,p,i)=>{y(f)&&x(p,f,i)},[x,r]),C=e.useCallback(f=>{const p=l.checked||"checked",i=r.map(g=>{if(g[String(l.id)].toString()===f){const j=g[String(p)];return j===!0||j==="true"?(v(E=>E.filter(k=>k.toString()!==f.toString())),{...g,[p]:!1}):(v(E=>[...E,f.toString()]),{...g,[p]:!0})}return g});c(i)},[l,r,c]),P=e.useCallback((f,p,i)=>{var I;if(!f)return;const g=(I=f[String(l.id)])==null?void 0:I.toString(),j={data:f,event:p,index:i};n==null||n(j,!1),C(g),h(f)},[n,C,S,l]),V=(f,p,i,g)=>{let j=g==="arrowKey"?f+p:f;const I=l.disabled;for(;j>=0&&j<i.length;){const E=i[Number(j)],k=E.isHeader===!0,L=I?E[String(I)]===!0||E[String(I)]==="true":!1,N=E[String(l.visible)]===!0;if(!k&&!L&&!N)return j;j+=p}return-1},O=e.useCallback((f,p,i)=>{const j=V(f,p?-1:1,r,i);F(j!==-1?j:f)},[r]),B=e.useCallback((f,p)=>{if(!r||r.length===0)return;const i=p?r.length-1:0;O(i,p,"homeKey")},[r]),_=e.useCallback((f,p)=>{if(!r||r.length===0)return;const i=(l==null?void 0:l.id)||"id",g=o?Math.max(0,r.findIndex(I=>String(I[String(i)])===String(o[String(i)]))):-1,j=g===-1?p?r.length-1:-1:g;O(j,p,"arrowKey")},[r,o,l==null?void 0:l.id]),W=e.useCallback((f,p)=>{if(s&&Object.keys(r).length){const i=r[Number(p)];P(i,f,p)}},[s,r,P]),b=e.useCallback((f,p)=>{switch(f.key){case"Home":f.preventDefault(),B(f,!1);break;case"End":f.preventDefault(),B(f,!0);break;case"ArrowDown":f.preventDefault(),_(f,!1);break;case"ArrowUp":f.preventDefault(),_(f,!0);break;case" ":f.preventDefault(),W(f,p);break}},[B,_,s,W]);return{focusedItem:o,activeItemsId:S,handleSelection:A,keyActionHandler:b,setCheckboxLI:P}},_s=(s,l)=>{const{items:r,itemSize:n,pageSize:c,overscanCount:a=5,scrollParent:o,height:h=360,onScrollRequest:S,role:v="listbox",showSkeleton:F,initialVisibleIndex:y=0,itemContent:x,style:A,totalCount:C,className:P,...V}=s,O=e.useMemo(()=>typeof C=="number"&&C>0?C:r.length,[C,r.length]),[B,_]=e.useState(()=>kt(O,0,n,c,a)),[W,b]=e.useState(0),[f,p]=e.useState(!1),i=e.useRef(null),g=e.useRef(!1),j=e.useRef(0),I=e.useRef(!1),E=e.useRef(null),k=e.useRef(0),L=e.useRef(0),N=e.useMemo(()=>Math.max(0,Math.floor(W/Math.max(1,n))),[W,n]),G=e.useMemo(()=>{if(!r||r.length===0)return-1;const D=Math.min(N,r.length-1);for(let T=D;T>=0;T--){const $=r[Number(T)];if($.isHeader)return T}return-1},[r,N]),H=e.useMemo(()=>G>=0?r[Number(G)]:null,[r,G]),le={items:r,itemSize:n,pageSize:c,overscanCount:a,scrollParent:o,height:h,showSkeleton:F,initialVisibleIndex:y,totalCount:C};e.useImperativeHandle(l,()=>({...le,element:(o==null?void 0:o.current)||i.current}),[le]),e.useEffect(()=>{_(kt(O,W,n,c,a))},[O,n,c,a]),e.useEffect(()=>{if(I.current)return;const D=(o==null?void 0:o.current)||i.current;if(!D)return;const $=Math.max(0,Math.min(y,Math.max(0,O)))*n;D.scrollTop=$,I.current=!0,b($),_(kt(O,$,n,c,a))},[o==null?void 0:o.current,y,O,n,c,a]);const te=e.useMemo(()=>{const D=Math.min(B.startIndex,r.length),T=Math.min(B.endIndex,r.length);return r.slice(D,T)},[r,B.startIndex,B.endIndex]),ie=e.useCallback(async(D,T)=>{if(!S||!(T.endIndex>=r.length))return;const q=r.length;let Z=c+a;if(typeof C=="number"&&C>0){const oe=Math.min(O,T.endIndex);oe>r.length&&(Z=oe)}if(g.current||j.current>r.length)return;g.current=!0,p(!0),j.current=q+Z;const me=await S({startIndex:q,count:Z,originalEvent:D});Promise.resolve(me).catch(()=>{p(!1)}).finally(()=>{g.current=!1,p(!1)})},[S,r.length,c,a,f,O,C]),he=e.useCallback(D=>{const T=(o==null?void 0:o.current)||i.current;if(!T||f)return;const $=T.scrollTop,q=kt(O,$,n,c,a),Z=k.current??0;if(Math.abs(q.startIndex-Z)>a&&E.current){const oe=q.offsetY||0;oe!==L.current&&(E.current.style.transform=`translate3d(0px, ${oe}px, 0px) translateZ(0px)`,L.current=oe)}ie(D,q),requestAnimationFrame(()=>{k.current=q.startIndex,b($),_(q)})},[n,c,a,O,r.length,o,ie,f]);e.useEffect(()=>{const D=(o==null?void 0:o.current)||i.current;if(D)return D.addEventListener("scroll",he,{passive:!0}),()=>D.removeEventListener("scroll",he)},[he,o==null?void 0:o.current]),e.useEffect(()=>{F&&(r.length===0&&S?p(!0):r.length>0&&p(!1))},[r.length,S,F]);const d=e.useCallback(()=>t.jsxs(t.Fragment,{children:[H&&W>=n&&t.jsx("div",{className:"sf-pinned-group",children:x(G,H)}),t.jsx("div",{className:"sf-virtual-content sf-pos-relative",style:{height:B.totalHeight},children:t.jsx("div",{className:"sf-virtual-items",ref:E,style:{transform:`translate3d(0px, ${B.offsetY}px, 0px) translateZ(0px)`},children:F&&f&&te.length!==0?Array.from({length:te.length}).map((D,T)=>t.jsx("div",{className:"sf-list-skeleton",style:{height:n}},`skeleton-${T}`)):te.map((D,T)=>{const $=B.startIndex+T;return x($,D)})})})]}),[n,B.totalHeight,B.offsetY,F,f,te,B.startIndex,x,H,G,W]),m=e.useMemo(()=>["sf-virtual-scroll-parent",P].filter(Boolean).join(" ").trim(),[P]);return o?d():t.jsx("div",{ref:i,role:v,className:m,style:{height:h,...A},...V,children:d()})},zs=e.forwardRef(_s),yn="sf-list-parent sf-ul",Gs={level:1,listRole:"list",listLabel:"list",itemRole:"listitem",groupItemRole:"group"},Xt={id:"id",text:"text",url:"url",checked:"checked",disabled:"disabled",icon:"icon",child:"child",visible:"visible",tooltip:"tooltip",htmlAttributes:"htmlAttributes",imageUrl:"imageUrl",groupBy:void 0},Js=e.memo(e.forwardRef(({items:s,fields:l=Xt,scrollParent:r,checkBox:n=!1,checkBoxPosition:c=Jt.Left,virtualization:a,parentClass:o,itemTemplate:h,groupTemplate:S,ariaAttributes:v,getItemProps:F,onItemKeyDown:y,onSelect:x,setListItemDatas:A,onScrollRequest:C,disableDefaultInteractions:P=!1,disabled:V=!1},O)=>{v={...Gs,...v};const _=e.useRef(null),W=e.useRef(null);e.useImperativeHandle(O,()=>_.current,[]);const b=qs({checkBox:n,fields:l,listItemDatas:s||[],onSelect:x,setListItemDatas:A||(()=>{}),scrollParent:r!=null&&r.current?r:W}),f=(l==null?void 0:l.id)??"id",p=e.useMemo(()=>{var k;if(!b.focusedItem||!s)return-1;const E=String((k=b.focusedItem)==null?void 0:k[String(f)]);return Y(E)?-1:s.findIndex(L=>String(L==null?void 0:L[String(f)])===String(E))},[b.focusedItem,s,f]),i=e.useCallback((E,k)=>{if(V)return;if(P){x==null||x({event:E,index:k},p===k);return}const L=E.currentTarget,N=s==null?void 0:s[Number(k)];N&&(n&&Fs(L)?L.classList.contains("sf-has-child")?b.handleSelection(N,E,k):b.setCheckboxLI(N,E,k):b.handleSelection(N,E,k))},[P,V,n,b]),g=e.useCallback(E=>{V||(P||b.keyActionHandler(E,p),y==null||y(E,p))},[P,b,y,p,V]),j=e.useMemo(()=>[o||"sf-list-container",a?"sf-virtualization":""].filter(Boolean).join(" ").trim(),[a,o]),I=e.useCallback((E,k)=>t.jsx(Us,{item:k,fields:l,index:E,onItemClick:i,getItemProps:F,itemTemplate:h,groupTemplate:S,checkBoxPosition:c,parentClass:o,ariaAttributes:v,checkBox:n,focusedIndex:p,isChecked:b.activeItemsId.includes(String(k==null?void 0:k[String(f)])),as:a?"div":"li"},`sf-item-${E}`),[l,i,F,h,S,c,o,v,n,p,b.activeItemsId,f]);return t.jsx("div",{ref:_,className:j,children:a?t.jsx("div",{ref:W,className:yn,role:(v==null?void 0:v.listRole)??void 0,"aria-label":(v==null?void 0:v.listLabel)??void 0,tabIndex:0,onKeyDown:g,children:t.jsx(zs,{items:s,itemSize:a==null?void 0:a.itemSize,pageSize:a==null?void 0:a.pageSize,overscanCount:a==null?void 0:a.overscanCount,showSkeleton:a.showSkeleton,scrollParent:r||W,onScrollRequest:C,itemContent:I})}):t.jsx("ul",{ref:W,className:yn,role:(v==null?void 0:v.listRole)??void 0,"aria-label":(v==null?void 0:v.listLabel)??void 0,tabIndex:0,onKeyDown:g,children:s==null?void 0:s.map((E,k)=>I(k,E))})})})),Ks=s=>{const l=e.useMemo(()=>["sf-ddl sf-popup",s.className].filter(Boolean).join(" "),[s.className]),{isOpenControlled:r,isPopupOpen:n,open:c,setIsPopupOpen:a,setAriaExpanded:o,setIsSpanFocused:h,spanElementRef:S,inputElementRef:v,popupRef:F,onOpen:y,onClose:x,popupWidth:A,popupHeight:C}=s,P=e.useCallback(b=>{var f;r||(a(!0),o(!0),(f=S.current)==null||f.focus()),y&&y({event:b})},[r,a,o,S,y,F]),V=e.useCallback(b=>{var f;r||(a(!1),o(!1)),x&&F.current&&x({event:b}),c||(h(!0),(f=v==null?void 0:v.current)==null||f.focus())},[r,a,o,x,F,c,h,v]),O=e.useCallback(b=>{var j,I,E;const f=b.target,p=!!S.current&&!S.current.contains(f),i=!!((j=F.current)!=null&&j.element)&&!F.current.element.contains(f),g=f instanceof Element?f:null;(n&&p&&i||!p&&((E=(I=F.current)==null?void 0:I.element)!=null&&E.classList.contains("sf-input-group")))&&(V(b),h(!1)),p&&!(g&&g.matches(".sf-list-item"))&&!(g&&g.matches(".sf-input-icon"))&&h(!1)},[n,V,h,S,F]),B=e.useCallback((b,f,p)=>{const i=$n(b);if(!i.includes("%"))return i;const g=parseFloat(i);if(!f||Number.isNaN(g))return i;const j=typeof f.getBoundingClientRect=="function"?f.getBoundingClientRect():null,I=p==="width"?f.offsetWidth:f.offsetHeight,E=j?p==="width"?j.width:j.height:0;let k=0;if(typeof window<"u"&&window.getComputedStyle){const N=window.getComputedStyle(f),G=p==="width"?N.width:N.height;k=parseFloat(G||"0")||0}return`${(I||E||k||0)*g/100}px`},[]),_=e.useCallback(()=>B(A,S.current,"width"),[A,S,B]),W=e.useCallback(()=>B(C,v.current,"height"),[C,v,B]);return e.useEffect(()=>(n&&document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}),[n,O]),e.useEffect(()=>{const b=f=>{var i;const p=((i=F.current)==null?void 0:i.element)&&!F.current.element.contains(f.target)&&!S.current.contains(f.target);n&&p&&(V(f),h(!1))};return n&&document.addEventListener("scroll",b,!0),()=>{document.removeEventListener("scroll",b,!0)}},[n,V,F,h]),{showPopup:P,hidePopup:V,setPopupWidth:_,setPopupHeight:W,popupClassNames:l}},Qs=({valueTemplate:s,dropdownValue:l,dataSource:r,fields:n,allowObjectBinding:c=!1,onRenderedChange:a})=>{const o=e.useMemo(()=>{if(!s||l==null||!Array.isArray(r)||r.length===0)return null;const h=r[0];return typeof h=="string"||typeof h=="number"||typeof h=="boolean"?new Map(r.map(y=>[y,y])).get(l)??null:r.find(F=>{const y=n.value?Q(n.value,F):F;return c?y===l:y===l||y!=null&&l!=null&&y.toString()===l.toString()})??null},[s,l,r,n,c]);return e.useEffect(()=>{a&&a(o!==null&&!!s)},[a,o,s]),!s||o===null?null:typeof s=="function"?t.jsx(t.Fragment,{children:s(o)}):t.jsx(t.Fragment,{children:s})},Ys=e.memo(Qs),Xs=s=>{const{isInteractive:l,skipDisabledItems:r,activeIndex:n,isRemoteData:c,dataSourceListItems:a,fields:o,onChange:h,setTextValue:S,setActiveIndex:v,dropdownbaseRef:F,showPopup:y,hidePopup:x,setIsSpanFocused:A,setDropdownValue:C,prefetchData:P,currentItemData:V,setItemData:O,onScroll:B,virtualization:_}=s,W=e.useCallback(d=>d.map(m=>{const D=(o==null?void 0:o.disabled)&&typeof m=="object"&&Q(o.disabled,m)===!0,T=typeof m=="object"&&!!Q("isHeader",m);return{item:m,isDisabled:!!D,isHeader:T}}),[o==null?void 0:o.disabled]),b=e.useCallback(d=>d!=null&&d.isHeader?!0:!!(d!=null&&d.isDisabled),[]),f=e.useCallback((d,m,D)=>{if(!r)return Math.max(0,Math.min(d.length-1,m+D));let T=m;const $=d.length;for(let q=0;q<$&&(T+=D,!(T<0||T>=d.length));q++)if(!b(d[T]))return T;return-1},[r,b]),p=e.useCallback((d,m=!1)=>{if(!r)return m?d.length-1:0;if(m){for(let D=d.length-1;D>=0;D--)if(!b(d[D]))return D;return-1}else{for(let D=0;D<d.length;D++)if(!b(d[D]))return D;return-1}},[r,b]),i=e.useCallback((d,m)=>{if(!r||!b(d[m]))return m;let D=m,T=m;for(;D<d.length-1||T>0;){if(D<d.length-1&&(D++,!b(d[D])))return D;if(T>0&&(T--,!b(d[T])))return T}return-1},[r,b]),g=d=>String(ht(d.item,"text",o)??""),j=(d,m,D)=>{if(!d||d.length===0||!m)return-1;const T=d.length;let $=Math.max(-1,Math.min(T-1,D));for(let q=0;q<T;q++){$=($+1)%T;const Z=d[$];if(!b(Z)&&g(Z).toLowerCase().startsWith(m))return $}return-1},I=(d,m,D)=>{const T=ht(d.item,"value",o);S==null||S(String(ht(d.item,"text",o))),T!==void 0&&(C==null||C(T),O==null||O(d.item)),h&&T!==void 0&&h({event:m,previousItemData:D==null?void 0:D.item,value:T,itemData:d.item})},E=()=>{var m,D;const d=F.current?(D=(m=F.current)==null?void 0:m.getFilteredListData)==null?void 0:D.call(m):null;return Array.isArray(d)?W(d):a},k=d=>{const m=typeof V=="object"&&V!==null?Q((o==null?void 0:o.value)??"value",V):V,D=d.findIndex(T=>String(ht(T.item,"value",o))===String(m??""));return D!==-1||V?D:n??-1},L=e.useCallback((d,m,D,T)=>{v(D);const $=T>-1?m[T]:void 0;if(I(m[D],d,$),D>=m.length-1&&_&&B){const Z=Array.isArray(m)?m.length:0,me=_.overscanCount??5,oe=_.pageSize+me;B({originalEvent:d.nativeEvent,startIndex:Z,count:oe})}},[v,I,_,B]),N=e.useCallback(d=>{const m=d.key.toLowerCase(),D=$=>{var me,oe;if($.length===0)return;const q=k($),Z=j($,m,q);Z!==-1&&(L(d,$,Z,q),F.current&&Lt(Z,(oe=(me=F.current)==null?void 0:me.getScrollContainer)==null?void 0:oe.call(me)))};if((!a||a.length===0)&&P&&c){le(d);return}const T=E();T&&D(T)},[n,c,a,P,W,F,v,r,I,V,o,L]),G=d=>d==="ArrowDown"||d==="ArrowUp"||d==="PageUp"||d==="PageDown"||d==="Home"||d==="End",H=e.useCallback((d,m,D)=>{const T=m.length;switch(d){case"ArrowDown":return f(m,D,1);case"ArrowUp":return f(m,D,-1);case"PageDown":{const $=D!==-1?D:0,q=Math.max(0,Math.min(T-1,$+10));return i(m,q)}case"PageUp":{const $=D!==-1?D:T-1,q=Math.max(0,Math.min(T-1,$-10));return i(m,q)}case"Home":return p(m,!1);case"End":return p(m,!0);default:return D}},[f,i,p]),le=d=>{P==null||P().then(m=>{if(!m||m.length===0)return;const D=W(m);te(d,D,d.key)})},te=e.useCallback((d,m,D)=>{var q,Z;if(m.length===0)return;const T=k(m),$=H(D,m,T);$!==T&&$>=0&&$<m.length&&(L(d,m,$,T),F.current&&Lt($,(Z=(q=F.current)==null?void 0:q.getScrollContainer)==null?void 0:Z.call(q)))},[n,v,H,I,V,o,L]),ie=(d,m)=>{m?(y(d),A(!0),d.preventDefault()):x(d),A(!0)};return{keyActionHandler:e.useCallback(d=>{var D,T;if(!l)return;if(d.altKey){if(d.key==="ArrowDown"){ie(d,!0);return}if(d.key==="ArrowUp"){ie(d,!1),d.preventDefault();return}}if(d.key===" "){ie(d,!0);return}else if(d.key==="Enter")if(d.preventDefault(),F!=null&&F.current){const $=E();if(!$)return;const q=k($);q&&q>=0&&q<$.length&&L(d,$,q,q),ie(d,!1);return}else{ie(d,!0);return}else if(d.key==="Tab"||d.key==="Escape"){if(ie(d,!1),d.key==="Tab"){A(!1);return}d.preventDefault(),d.stopPropagation();return}if(d.key.length===1&&!d.ctrlKey&&!d.metaKey&&!d.altKey&&!((T=(D=d.target)==null?void 0:D.classList)!=null&&T.contains("sf-input-filter"))){d.preventDefault(),N(d);return}if(G(d.key)){if(d.preventDefault(),(!a||a.length===0)&&P&&c){le(d);return}const $=E();$&&te(d,$,d.key)}},[l,F,y,x,A,a,P,W,te,n,c,V,ie,E,le])}},Zs=(s={})=>{const{value:l,defaultValue:r,open:n,loading:c,onChange:a}=s,[o,h]=e.useState(!!n),[S,v]=e.useState(!1),[F,y]=e.useState(""),[x,A]=e.useState(!1),[C,P]=e.useState(!!c),[V,O]=e.useState(null),[B,_]=e.useState(null),[W,b]=e.useState(null),[f,p]=e.useState(null),i=e.useMemo(()=>n!==void 0,[n]),g=e.useMemo(()=>l!==void 0&&!!a,[l,a]),j=e.useMemo(()=>g||l!==void 0?l:r!==void 0?r:null,[g,l,r]),[I,E]=e.useState(j);e.useEffect(()=>{i&&h(!!n)},[i,n]),e.useEffect(()=>{P(!!c)},[c]),e.useEffect(()=>{g&&E(l)},[g,l]);const k=e.useCallback(()=>{i||h(!0),v(!0)},[i]),L=e.useCallback(()=>{i||h(!1),v(!1)},[i]);return[{isPopupOpen:o,ariaExpanded:S,dropdownValue:I,textValue:F,isSpanFocused:x,isLoading:C,activeIndex:V,itemData:B,previousItemData:W,changeEvent:f},{setIsPopupOpen:H=>h(H),setAriaExpanded:H=>v(H),setDropdownValue:H=>E(H),setTextValue:H=>y(H),setIsSpanFocused:H=>A(H),setIsLoading:H=>P(H),setActiveIndex:H=>O(H),setItemData:H=>_(H),setPreviousItemData:H=>b(H),setChangeEvent:H=>p(H),openPopup:k,closePopup:L}]},er=s=>{const{value:l,defaultValue:r,dataSource:n,dataSourceListItems:c,fields:a,isValueControlled:o,allowObjectBinding:h,filterable:S,dropdownbaseRef:v,dropdownValue:F,setDropdownValue:y,setTextValue:x,setActiveIndex:A,setItemData:C,prefetchData:P}=s,V=e.useRef(r),O=e.useRef(!1),B=e.useRef(n),_=e.useCallback(i=>typeof i=="string"||typeof i=="number"||typeof i=="boolean",[]),W=e.useCallback(i=>{if(Array.isArray(n)){const I=n[0];if((typeof I=="string"||n.length===0)&&typeof i=="boolean"){x("");return}else if(typeof I=="object"&&!h)return}const g=a==null?void 0:a.text,j=g&&i&&typeof i=="object"?String(i[g]):"";x(_(i)?String(i):h&&g?String(j):"")},[n,_,x]),b=e.useCallback(i=>{const g=a==null?void 0:a.value;return h&&i&&typeof i=="object"&&g?i[g]??null:i??null},[h,a==null?void 0:a.value]),f=e.useCallback((i,g)=>{const j=a==null?void 0:a.value;if(g&&typeof g=="object"&&j){for(let I=0;I<g.length;I++)if(Q(j,g[I].item)===i)return{index:I,textValue:Q(a.text||a.value,g[I].item)}}return{index:-1,textValue:i}},[a==null?void 0:a.value,a==null?void 0:a.text]),p=e.useCallback((i,g)=>{if(!Array.isArray(i)||Y(g))return!1;const j=i.length>0&&_(i[0]),I=a==null?void 0:a.value,E=a==null?void 0:a.text,k=new Map;i.forEach((N,G)=>{const H=j?String(N):I?String(Q(I,N)):"";k.set(H,G)});const L=k.get(String(g))??-1;if(L!==-1){const N=i[L],G=String(j?N:E?Q(E,N):g);return x(G),A(L),C==null||C(N),!0}return!1},[a==null?void 0:a.value,a==null?void 0:a.text,_,A,x]);e.useLayoutEffect(()=>{var j,I,E,k,L;if(o){const N=l;if(Y(N))x(""),A(null);else{y(N);const G=S?(j=v==null?void 0:v.current)==null?void 0:j.getFilteredListData():n;if(G&&Array.isArray(G))p(G,N)||W(N);else if(G instanceof Pe){const H=b(N);if(Y(H))x(""),A(null);else{let le=((E=(I=v==null?void 0:v.current)==null?void 0:I.getTextByValue)==null?void 0:E.call(I,H))??"",te=((L=(k=v==null?void 0:v.current)==null?void 0:k.getIndexByValue)==null?void 0:L.call(k,H))??-1;if(le===""&&!(v!=null&&v.current)){const{index:ie,textValue:he}=f(H,c);le=he,te=ie}x(le),A(te!==-1?te:null)}}}return}const i=JSON.stringify(V.current)!==JSON.stringify(r),g=JSON.stringify(B.current)!==JSON.stringify(n);if(!O.current||i||g){const N=l??r??F;Y(N)?(x(""),A(null)):(y(N),n&&Array.isArray(n)?p(n,N)||W(N):n instanceof Pe&&P&&P().then(G=>{!G||G.length===0||p(G,N)||W(N)})),O.current=!0,V.current=r,B.current=n}},[o,l,r,n,a==null?void 0:a.value,a==null?void 0:a.text,p,y,W,x,A])},Zt=e.forwardRef((s,l)=>{const{dataSource:r,query:n,fields:c,value:a=null,placeholder:o="",id:h=`dropdownlist_${e.useId()}`,disabled:S=!1,readOnly:v=!1,popupSettings:F={},allowObjectBinding:y=!1,labelMode:x="Never",open:A,skipDisabledItems:C=!0,defaultValue:P=null,ignoreCase:V=!0,ignoreAccent:O=!1,filterable:B=!1,filterType:_="StartsWith",filterPlaceholder:W="",debounceDelay:b=0,sortOrder:f=ft.None,loading:p=!1,size:i=Ee.Medium,variant:g=_t.Standard,inputProps:j={},itemTemplate:I,headerTemplate:E,footerTemplate:k,groupTemplate:L,valueTemplate:N,noRecordsTemplate:G,clearButton:H=!1,dropdownIcon:le,valid:te,validationMessage:ie="",validityStyles:he=!0,required:d,className:m,virtualization:D,onChange:T,onOpen:$,onClose:q,onError:Z,onFilter:me,onDataRequest:oe,onDataLoad:Le,onScroll:We,onErrorTemplate:Je,...pt}=s,Vt=e.useMemo(()=>t.jsx(Ss,{}),[]),ce=r!==void 0?r:[],ne=e.useMemo(()=>c??{text:"text",value:"value",groupBy:"groupBy",disabled:"disabled"},[c==null?void 0:c.text,c==null?void 0:c.value,c==null?void 0:c.groupBy,c==null?void 0:c.disabled,c==null?void 0:c.htmlAttributes]),Ve=e.useMemo(()=>{const R={...j||{}};return delete R.className,delete R.id,delete R.readOnly,delete R.required,delete R.value,delete R.defaultValue,R},[j]),at=A!==void 0,[Re,je]=e.useState(!1),[yt,Ke]=e.useState(!1),[Ue,Qe]=e.useState(!1),[Ae,qe]=e.useState(!1),_e=e.useRef(null),Be=e.useRef(null),xt=e.useRef(null),X=e.useRef(null),Bt=e.useRef(null),Ht=e.useRef(a),Te=e.useRef(null),ye=e.useRef(null),He=e.useRef(null),xe=e.useRef(!1),[Ot,St]=Zs({defaultValue:P}),{isPopupOpen:se,ariaExpanded:mt,dropdownValue:Se,textValue:lt,isSpanFocused:it,isLoading:Oe,activeIndex:Fe,itemData:$e}=Ot,{setIsPopupOpen:ct,setAriaExpanded:Ye,setDropdownValue:we,setTextValue:ve,setIsSpanFocused:be,setIsLoading:u,setActiveIndex:w,setItemData:M,setPreviousItemData:z,setChangeEvent:U}=St,ee=R=>{var K;be(!se),Oe&&!re&&!p&&u(!1),v||(se?ze(R):(Ct(R),(K=_e.current)==null||K.focus()))},re=e.useMemo(()=>ce instanceof Pe,[ce]),{dir:ge,locale:ue}=Kt(),ae=`${h.replace(/[,]/g,"_")}_spinner`,{isInputValid:fe}=tr({dropdownValue:Se,inputElementRef:Be,required:d,valid:te,validationMessage:ie}),Me=e.useMemo(()=>`${h}_listbox`,[h]),gt=e.useCallback(R=>`${h}_option_${R}`,[h]),vt=e.useMemo(()=>({role:"combobox","aria-controls":Me,"aria-activedescendant":Fe!=null?gt(Fe):void 0,"aria-expanded":mt,"aria-autocomplete":"list"}),[Me,Fe,gt,mt]),De=e.useMemo(()=>({zIndex:1e3,position:{X:"left",Y:"bottom"},collision:ge==="rtl"?{X:Dt.Fit,Y:Dt.Flip}:{X:Dt.Flip,Y:Dt.Flip},autoReposition:!0,width:"100%",height:"300px",...F}),[F,ge]),{showPopup:Ct,hidePopup:ze,setPopupWidth:Jn,setPopupHeight:Kn,popupClassNames:Qn}=Ks({isOpenControlled:at,isPopupOpen:se,open:A,setIsPopupOpen:ct,setAriaExpanded:Ye,setIsSpanFocused:be,spanElementRef:_e,inputElementRef:Be,popupRef:xt,onOpen:$,onClose:q,popupWidth:De.width,popupHeight:De.height,className:m}),en=e.useMemo(()=>{const R=Te.current?Te.current:ce;if(!Array.isArray(R)||R.length===0)return[];const K=R.filter(de=>de!=null&&(typeof de=="string"||typeof de=="number"||typeof de=="boolean"||typeof de=="object"));return K.length===0?[]:_n(K,ne,f,n??new pe).map(de=>{const Ce=ne.disabled&&typeof de=="object"&&Q(ne.disabled,de)===!0,jt=typeof de=="object"&&!!Q("isHeader",de);return{item:de,isDisabled:!!Ce,isHeader:jt}})},[Te.current,ce,ne,f,n,Ue]),bt=e.useCallback(()=>{u(!0),qe(!0)},[u]),ke=e.useCallback(()=>{u(!1),qe(!1)},[u]),$t=e.useCallback(()=>{if(ke(),xe.current=!0,X.current&&Se!==null&&Se!==void 0){const R=X.current.getDataByValue(Se);if(R!==void 0){const K=ne==null?void 0:ne.text,J=typeof R=="object"&&K?String(Q(K,R)):typeof R=="string"||typeof R=="number"||typeof R=="boolean"?String(R):X.current.getTextByValue(Se);ve(J)}}},[ke,X,Se,ne==null?void 0:ne.text,ve]),Pt=e.useCallback(async()=>{const R=re?await is():ce;if(Array.isArray(R)){const K=R.filter(J=>J!=null&&(typeof J=="string"||typeof J=="number"||typeof J=="object"));return Te.current=K,Qe(!0),K}return null},[Ae,xe,$t,ee,ke]);er({value:a,defaultValue:P,dataSource:ce,dataSourceListItems:en,fields:ne,isValueControlled:yt,allowObjectBinding:y,filterable:B,dropdownbaseRef:X,dropdownValue:Se,setDropdownValue:R=>we(R),setTextValue:R=>ve(R),setActiveIndex:R=>w(R),setItemData:M,prefetchData:Pt}),e.useEffect(()=>{A!==void 0&&A!==se&&ct(!!A)},[A,se,ct]);const Yn=e.useCallback(R=>{ke(),u(!1),Qe(!0),Z==null||Z(R)},[Ae,xe,ke,Z]),{keyActionHandler:Wt}=Xs({isInteractive:!S&&!v,skipDisabledItems:C,activeIndex:Fe,onChange:T,setActiveIndex:w,isRemoteData:re,dataSourceListItems:en,fields:ne,dropdownbaseRef:X,setTextValue:R=>ve(R),showPopup:Ct,hidePopup:ze,setIsSpanFocused:be,setDropdownValue:R=>we(R),prefetchData:Pt,currentItemData:$e,setItemData:M,onScroll:We,virtualization:D}),Ut=e.useCallback((R,K,J,de)=>{z($e||null),U(K);let Ce=de??R;typeof J=="string"||typeof J=="number"||typeof J=="boolean"?(M(J),we(J),Ce=J):(M(J),de!=null&&(we(de),Ce=de)),X.current!=null&&Ce!==null&&Ce!==void 0&&w(X.current.getIndexByValue(Ce)),T&&Ce!==void 0&&T({event:K,previousItemData:$e,value:Ce,itemData:J||null})},[$e,T,ne]),tn=e.useCallback(R=>{var de,Ce,jt,an,ln,wt,cn;const J=R.target.closest(".sf-list-item");if(J){const un=((de=J.dataset)==null?void 0:de.value)??null;if(un){const dt=(jt=(Ce=X==null?void 0:X.current)==null?void 0:Ce.getFormattedValue)==null?void 0:jt.call(Ce,un),cs=((an=X==null?void 0:X.current)==null?void 0:an.getTextByValue(dt))||"";ve==null||ve(cs),dt!==void 0&&(we==null||we(dt));const us=(ln=X==null?void 0:X.current)==null?void 0:ln.getDataByValue(dt),dn=(cn=(wt=X==null?void 0:X.current)==null?void 0:wt.getFilteredListData)==null?void 0:cn.call(wt);if(dn){const fn=dn.findIndex(ds=>String(ht(ds,"value",ne))===String(dt??""));fn>=0&&(w==null||w(fn))}Ut==null||Ut(J,R,us,dt)}ze==null||ze()}},[ze,ne,ve,we,X]);e.useEffect(()=>{a!==void 0&&a!==Ht.current&&!y&&Ke(!0)},[a]),e.useEffect(()=>{se&&B&&X.current&&requestAnimationFrame(()=>{be(!1)})},[se,B]),e.useEffect(()=>{u(p)},[p,u]),e.useEffect(()=>{at&&(A?(be(!0),Ye(!0),Ct()):(ze(),Ye(!1),be(!1)))},[A,at,Ct,ze,Ye,be]),e.useEffect(()=>{On("dropdownlist")},[]),e.useEffect(()=>{ye.current===null&&(ye.current=JSON.stringify(s.dataSource)??null),He.current===null&&(He.current=JSON.stringify(s.fields)??null)},[]),e.useEffect(()=>{(JSON.stringify(s.dataSource)!==ye.current||JSON.stringify(s.fields)!==He.current)&&(ye.current=JSON.stringify(s.dataSource)??null,He.current=JSON.stringify(s.fields)??null,Te.current=null,xe!=null&&xe.current&&(Qe(!1),xe.current=!1,Pt()),u(!1))},[s.dataSource,s.fields]),e.useEffect(()=>{re||qe(!1)},[re]),e.useEffect(()=>{re&&se&&!xe.current&&bt()},[re,se,bt]);const qt=e.useMemo(()=>!!p&&!se,[p,se]),ut=e.useMemo(()=>re?qt||Ae&&!Ue:qt||Oe,[re,qt,Ae,Oe,Ue]),Xn=e.useMemo(()=>{const R=Qt("dropdownList",{placeholder:o},ue);return R.setLocale(ue),R.getConstant("placeholder")||o||""},[ue,o]),nn=R=>{if(Array.isArray(R.data)){const K=R.data.filter(J=>J!=null&&(typeof J=="string"||typeof J=="number"||typeof J=="object"));Te.current=K}else Te.current=null;Le==null||Le(R),Qe(!0)},sn=e.useMemo(()=>({dataSource:ce,query:n,fields:ne,value:a,placeholder:o,id:h,popupSettings:F,allowObjectBinding:y,itemTemplate:I,headerTemplate:E,valueTemplate:N,groupTemplate:L,noRecordsTemplate:G,footerTemplate:k,labelMode:x,open:A,skipDisabledItems:C,ignoreCase:V,ignoreAccent:O,filterable:B,filterType:_,filterPlaceholder:W,sortOrder:f,clearButton:H,dropdownIcon:le,loading:p,size:i,variant:g}),[ce,ne,a,o,h,F,y]),Zn=e.useMemo(()=>["sf-input-group sf-control","sf-ddl",ut?"sf-loading":"",ge==="rtl"?"sf-rtl":"",v?"sf-readonly":"",S?"sf-disabled":"",x!=="Never"?vs.FLOATINPUT:"",it?"sf-input-focus":"",!fe&&he?"sf-error":"",i===Ee.Small?"sf-small":i===Ee.Large?"sf-large":"sf-medium",g&&g.toLowerCase()!=="standard"?g.toLowerCase()==="outlined"?"sf-outline":`sf-${g.toLowerCase()}`:"",m].filter(Boolean).join(" "),[ut,v,S,ge,it,fe,he,i,g,m]),rn=e.useMemo(()=>!!(N&&Re),[N,Re]),es=e.useMemo(()=>t.jsx(Gn,{ref:X,dataSource:ce,itemData:$e,fields:ne,query:n,ignoreAccent:O,ignoreCase:V,isDropdownFiltering:B,filterPlaceholder:W,filterType:_,size:i,sortOrder:f,allowObjectBinding:y,onItemClick:tn,itemTemplate:I,headerTemplate:E,footerTemplate:k,groupTemplate:L,noRecordsTemplate:Ae?null:G,value:Se,keyActionHandler:Wt,onError:Yn,onErrorTemplate:Je,onFilter:me,onRemoteDataLoaded:$t,onDataRequest:oe,onDataLoad:nn,listId:Me,getOptionId:gt,activeIndex:Fe,id:h,debounceDelay:b,endRemoteRequest:ke,remoteCacheRef:Te,virtualization:D,onScroll:We},"list-view"),[X,ce,ne,n,O,V,B,W,_,i,f,tn,I,E,k,L,Ae,G,Se,Wt,Z,Je,me,$t,oe,Le,Me,h,gt,Fe,b,ke,Te,nn,D,We]);e.useImperativeHandle(l,()=>({...sn,element:Be.current,filter:ts}),[sn]);const ts=e.useCallback((R,K,J)=>{X.current&&X.current.filter(R,K,J||s.fields)},[s.fields]),ns=e.useCallback(R=>{ve(R.target.value)},[ve]),ss=e.useCallback(()=>{var K,J;be(!0);const R=(K=Be.current)==null?void 0:K.value.length;R&&((J=Be.current)==null||J.setSelectionRange(R,R))},[se,Fe,be,X,w]),rs=e.useCallback(R=>{R.preventDefault(),R.stopPropagation(),ve(""),we(null),w(null),M(null),U(null),T&&T({event:R,previousItemData:$e,value:null,itemData:null})},[T,$e,ve,we,w,M,U]),on=e.useCallback(()=>{be(!1)},[be]),os=e.useCallback(R=>{var J;if(S)return;const K=R.relatedTarget;(J=Be.current)!=null&&J.contains(K)||on(R)},[S,on]),as=e.useCallback(()=>t.jsx(Ys,{valueTemplate:N,dropdownValue:Se,dataSource:Array.isArray(ce)?ce:[],fields:ne,allowObjectBinding:y,onRenderedChange:je}),[N,Se,ce,ne,y]),ls=e.useCallback(R=>{if(R.button===2||S)return;const K=R.target instanceof Element?R.target:null;K&&K.parentElement&&K.parentElement.matches(".sf-clear-icon")||(ee(R),re&&se&&ke())},[ke,S,se,re,ee]),is=e.useCallback(async()=>{if(!re||xe.current)return null;const R=ce;try{bt(),oe==null||oe({data:R,query:n??new pe});const K=await R.executeQuery(n??new pe),J=Array.isArray(K==null?void 0:K.result)?K.result:[];return xe.current=!0,Le==null||Le({data:J}),ke(),J}catch(K){return ke(),Z==null||Z(K),null}},[re,ce,n,bt,ke,oe,Le,Z]);return t.jsxs(t.Fragment,{children:[t.jsxs("span",{ref:_e,className:Zn,tabIndex:-1,onMouseDown:ls,onKeyDown:Wt,...pt,children:[N&&t.jsx("span",{className:`sf-input-value ${rn?"sf-content":"sf-display-none"}`,children:as()}),t.jsx(Pn,{id:h,ref:Be,className:`${ge==="rtl"?"sf-rtl":""} ${fe?"sf-valid-input":""} sf-dropdown-list ${rn?"sf-input-value-template":""}`,type:"text",value:lt||"","aria-haspopup":"listbox","aria-label":"dropdownlist","aria-disabled":S,"aria-readonly":v,placeholder:Xn,floatLabelType:x,onChange:ns,onFocus:ss,onBlur:os,...vt,...Ve,readOnly:!0,required:d}),x!=="Never"&&Cs(x,it,lt||"",o,h),H&&Wn(lt&&(it||se)?lt:"",rs),!ut&&t.jsx("span",{ref:Bt,id:ae,"aria-hidden":"true",className:`sf-input-icon sf-ddl-icon
                          ${ut?"":"sf-icon-container"} 
                          ${!ut&&se?"sf-icon-rotate":"sf-icon-normal"} 
                          ${i===Ee.Small?"sf-small":i===Ee.Large?"sf-large":"sf-medium"}`,children:le??Vt}),ut&&t.jsx(Yt,{size:i===Ee.Small?"16px":"20px",visible:!0})]}),se&&typeof document<"u"&&fs.createPortal(t.jsx(bs,{ref:xt,className:Qn,id:`${h}_popup`,relateTo:_e.current,width:Jn(),height:"auto",position:De.position,zIndex:De.zIndex,collision:De.collision,open:se,autoReposition:De.autoReposition,animation:{show:{name:"FadeIn",duration:100},hide:{name:"FadeOut",duration:100}},offsetX:De.offsetX,offsetY:De.offsetY,style:{maxHeight:Kn()},children:es}),document.body)]})});e.memo(Zt);const tr=s=>{const{dropdownValue:l,inputElementRef:r,required:n,valid:c,validationMessage:a}=s,o=e.useMemo(()=>c!==void 0?!!c:n?l!=null:!0,[c,n,l]);return e.useEffect(()=>{const h=o?"":a||"",S=(r==null?void 0:r.current)??void 0;S&&typeof S.setCustomValidity=="function"&&S.setCustomValidity(h)},[o,a,r]),{isInputValid:o}},_n=(s,l,r,n)=>{const c=s.length>0&&(typeof s[0]=="string"||typeof s[0]=="number"||typeof s[0]=="boolean");if(c||!l.groupBy)if(c&&r!==ft.None){const a=[...s];return r===ft.Ascending?a.sort((o,h)=>String(o).localeCompare(String(h))):r===ft.Descending&&a.sort((o,h)=>String(h).localeCompare(String(o))),a}else{const a=Un(r,(l==null?void 0:l.text)||"text",n),o=qn(s,a);return o&&Array.isArray(o.result)?o.result:o}else return Is(s,l,r)},zn=s=>{switch(String(s??"")){case"StartsWith":return"startsWith";case"EndsWith":return"endsWith";case"Contains":return"contains";default:return"contains"}},nr=(s,l,r)=>{if(Y(s)||!Array.isArray(l)||l.length===0)return-1;const n=(r==null?void 0:r.value)||"value",c=String(typeof s=="object"?Q(n,s):s);for(let a=0;a<l.length;a++){const o=l[a];if(!Y(o)&&!(typeof o=="object"&&(o!=null&&o.isHeader))){if(typeof o=="object"){const h=Q(n,o);if(!Y(h)&&String(h)===c)return a}else if(String(o)===c)return a}}return-1},ht=(s,l,r)=>{let n;return l==="value"?n=(r==null?void 0:r.value)??"value":n=(r==null?void 0:r.text)??"text",typeof s=="string"||typeof s=="number"||typeof s=="boolean"?s:typeof s=="object"&&s!==null?Q(n,s):""},sr=s=>{const{isDropdownFiltering:l,ignoreCase:r,ignoreAccent:n,filterType:c,fields:a,dataSource:o,onFilter:h,setListData:S,baseQuery:v}=s,[F,y]=e.useState(""),[x,A]=e.useState(!1),C=e.useRef(null),P=s.externalTypedString!==void 0?s.externalTypedString:F,V=s.setExternalTypedString||y,O=s.externalFilterInputRef||C,B=e.useCallback((i,g)=>{if(O.current!=null&&O.current.value.trim()!==""){const j=g||v||new pe;if(!g){const I=zn(c);Array.isArray(i)&&i.length>0&&(typeof i[0]=="string"||typeof i[0]=="number"||typeof i[0]=="boolean")?j.where("",I,O.current.value,r,n):j.where(a.text||"text",I,O.current.value,r,n)}S(i,j,!0,O.current.value)}else S(i,g||v||new pe,!0)},[c,a,r,n,S,v]),_=e.useCallback((i,g)=>{if(l&&O.current!=null){const j={preventDefaultAction:!1,text:g,event:i};h&&h(j),!x&&!j.preventDefaultAction&&o&&B(o,null)}},[l,B,h,x,o]),W=e.useCallback((i,g)=>{g&&g(i)},[]),b=e.useCallback((i,g,j)=>{var E;A(!0);const I=((E=O.current)==null?void 0:E.value)||P;if(I){const k=g||new pe;g||k.where((j==null?void 0:j.text)||"text","contains",I,r),B(i,k)}else B(i,g)},[P,r,B]),f=e.useCallback(i=>{V(i.target.value),_(i,i.target.value)},[_]),p=e.useCallback(i=>{i.preventDefault(),i.stopPropagation(),V(""),S(o,v||new pe,!0)},[V,S,o,v]);return{typedString:P,setTypedString:V,filterInputElementRef:O,onFilterUp:W,handleInputChange:f,searchLists:_,clearText:p,filter:b}},At=(s,l)=>s===null?null:e.isValidElement(s)?s:typeof s=="function"?s():null,rr=({headerTemplate:s})=>t.jsx(t.Fragment,{children:At(s)}),or=e.memo(rr),ar=({footerTemplate:s})=>t.jsx(t.Fragment,{children:At(s)}),lr=e.memo(ar),ir=({noRecordsTemplate:s,defaultText:l})=>{const r=t.jsx("div",{className:"sf-content sf-dd-base sf-dd-nodata",children:l}),n=At(s);return t.jsx(t.Fragment,{children:n??r})},cr=e.memo(ir),ur=({errorTemplate:s,defaultText:l})=>{const r=t.jsx("div",{className:"sf-content sf-dd-base sf-dd-nodata",children:l}),n=At(s);return t.jsx(t.Fragment,{children:n??r})},dr=e.memo(ur),fr={text:"text",value:"value",disabled:"disabled",groupBy:void 0,htmlAttributes:"htmlAttributes"},Ie={root:"sf-dd-base",content:"sf-content",selected:"sf-active",focus:"sf-item-focus",li:"sf-list-item",disabled:"sf-disabled",grouping:"sf-dd-group",hover:"sf-hover",noData:"sf-dd-nodata"},Gn=e.forwardRef((s,l)=>{const{dataSource:r=[],fields:n=fr,value:c,query:a,isDropdownFiltering:o=!1,filterPlaceholder:h="",ignoreCase:S,ignoreAccent:v,filterType:F="StartsWith",size:y=Ee.Medium,itemTemplate:x,groupTemplate:A,headerTemplate:C,footerTemplate:P,sortOrder:V=ft.None,noRecordsTemplate:O,onErrorTemplate:B,allowObjectBinding:_=!1,activeIndex:W,id:b,debounceDelay:f=0,remoteCacheRef:p,itemData:i,virtualization:g,onError:j,onItemClick:I,onFilter:E,onRemoteDataLoaded:k,onDataRequest:L,onDataLoad:N,getOptionId:G,endRemoteRequest:H,onScroll:le}=s,{locale:te}=Kt(),he=Qt("dropdownList",{noRecordsMessage:"No Records Found",errorMessage:"Request Failed"},te||"en-US"),d=(a==null?void 0:a.clone())??new pe,[m,D]=e.useState([]),[T,$]=e.useState(!1),[q,Z]=e.useState(!1),[me,oe]=e.useState(null),[Le,We]=e.useState(null),[Je,pt]=e.useState(""),[Vt,ce]=e.useState(!1),ne=e.useRef([]),Ve=e.useRef(null),at=e.useRef(Je),Re=e.useRef(null),je=e.useRef(null),yt=e.useRef(null),Ke=e.useCallback(u=>{let w;if(o){w=u.clone();const M=at.current??"";if(M!==""){const z=zn(F),U=ye(r).typeof;if(!(r instanceof Pe)&&(U==="string"||U==="number"||U==="boolean"))w.where("",z,M,S,v);else{const re=n!=null&&n.text?n.text:"text";w.where(re,z,M,S,v)}}}else w=u.clone();return w.clone()},[a,o,F,S,v,n]),Ue=e.useCallback(u=>{q||Z(!0);const w=_n(u,n,V,a??new pe);D(w)},[n,V,a,q]),Qe=e.useCallback(u=>{if(!(r instanceof Pe)||!(p!=null&&p.current)||!u)return;const w=Array.from(p==null?void 0:p.current),M=typeof u=="string"||typeof u=="number"||typeof u=="boolean",z=String(M?u:Q(n.value,u));w.some(ee=>String(M?typeof ee!="object"&&ee:typeof ee=="object"&&Q(n.value,ee))===z)||(w.push(u),p.current=w)},[n,p]),Ae=e.useCallback((u,w,M,z)=>{var re;let U;Array.isArray(u)?U=u.filter(ge=>ge!=null):U=u,at.current=z??"";const ee={data:U,query:w};if(U instanceof Pe){const ge=U;if(o&&!M&&Qe(i),p!=null&&p.current&&!M){const ue=p.current,ae=new Pe(ue),fe=ee.query?ee.query:Ke(new pe);fe.queries.some(De=>De.fn==="onTake")&&(fe.queries=(re=fe==null?void 0:fe.queries)==null?void 0:re.filter(De=>De.fn!=="onTake"),fe.take(ue.length));const Me=fe.executeLocal(ae),vt={data:Me&&Array.isArray(Me.result)?Me.result:Me};N==null||N(vt),Ue(vt.data);return}T||(L==null||L({data:ee.data,query:w?ee.query:Ke(new pe)}),$(!0),ce(!1),ge.executeQuery(ee.query?ee.query:Ke(new pe)).then(ue=>{const ae=ue&&Array.isArray(ue.result)?ue.result:[];if(p&&!M&&(p.current=ae),!ue.cancel){const fe={data:ue.result};M||N==null||N(fe),Ue(fe.data)}$(!1),ce(!1),k==null||k()}).catch(ue=>{$(!1),ce(!0),Z(!1),j==null||j(ue),H==null||H()}))}else{const ge=new Pe(ee.data),ae={data:Ke(ee.query||new pe).executeLocal(ge)};N==null||N(ae),Ue(ae.data),$(!1),ce(!1)}},[T,Ke,V,j,B,k,L,N,Ue,Qe]),{onFilterUp:qe,handleInputChange:_e,clearText:Be,filter:xt}=sr({isDropdownFiltering:o,ignoreCase:S,ignoreAccent:v,filterType:F,fields:n,dataSource:r,baseQuery:d,onFilter:E,setListData:Ae,externalTypedString:Je,setExternalTypedString:pt,externalFilterInputRef:Ve}),X=e.useMemo(()=>{const u=Array.isArray(m)&&m.length>0&&(typeof m[0]=="string"||typeof m[0]=="number"||typeof m[0]=="boolean");return[Ie.content,Ie.root,!u&&n.groupBy?Ie.grouping:"",m.length===0?"sf-dd-nodata":""].filter(Boolean).join(" ")},[n.groupBy,m]),Bt=t.jsx(cr,{noRecordsTemplate:O,defaultText:he.getConstant("noRecordsMessage")}),Ht=t.jsx(dr,{errorTemplate:B,defaultText:he.getConstant("errorMessage")});e.useEffect(()=>{if(c!=null&&m.length>0){const u=new Map;m.forEach((M,z)=>{const U=String(typeof M=="object"?Q(n.value??"",M):M);u.set(U,z)});const w=u.get(String(c))??-1;w!==-1&&oe(w)}else c==null&&oe(null)},[c,m,n]),e.useEffect(()=>{o&&Ve.current&&Ve.current.focus({preventScroll:!0})},[o,Ve.current]),e.useEffect(()=>{(!q||yt.current!==JSON.stringify(r))&&(yt.current=JSON.stringify(r)??null,Ae(r,a))},[r,a,q]),e.useEffect(()=>{m.length>0?We(W||0):We(null)},[m,W]),e.useEffect(()=>()=>{je.current&&(clearTimeout(je.current),je.current=null)},[]);const Te=e.useCallback((u,w)=>{var ue;const M=(ue=Re==null?void 0:Re.current)==null?void 0:ue.parentElement,z=M.style.display;M.style.visibility="hidden",M.style.display="block";const U=w.offsetTop,ee=U+w.offsetHeight,re=u.scrollTop,ge=u.scrollTop+u.clientHeight;ee>ge?u.scrollTop=ee-u.clientHeight:U<re&&(u.scrollTop=Math.max(0,U)),M.style.visibility="",M.style.display=z},[Re]);e.useEffect(()=>{if(!q||Y(i))return;const u=typeof i=="object"&&i!==null?Q((n==null?void 0:n.value)??"value",i):i;if(Y(u))return;const w=Oe(),M=w==null?void 0:w.find(U=>{var ee;return((ee=U==null?void 0:U.dataset)==null?void 0:ee.value)===String(u)}),z=Fe();if(M&&z)Te(z,M);else if(g&&z){const U=nr(i,m,n);U!==-1&&Lt(U,z)}},[q]);const ye=e.useCallback(u=>{let w={typeof:null,item:null};if(!Array.isArray(u)||u.length===0)return w;for(let M=0;M<u.length;M++)if(u[M]!==null&&u[M]!==void 0&&!(typeof u[M]=="string"||typeof u[M]=="number"||typeof u[M]=="boolean"?Y(u[M]):Y(Q(n.value,u[M]))))return w={typeof:typeof u[M],item:u[M]};return w},[n]),He=e.useCallback(u=>{if(m&&m.length){const w=ye(m);if(typeof Q(n.value,w.item)=="number"||w.typeof==="number")return parseFloat(u);if(typeof Q(n.value,w.item)=="boolean"||w.typeof==="boolean")return u==="true"||""+u=="true"}return u},[m,n,ye]),xe=e.useCallback(u=>{if(!Y(m)){const w=ye(m).typeof;if(w==="string"||w==="number"||w==="boolean")for(let M=0;M<m.length;M++){const z=m[M];if(!Y(z)&&String(z)===String(u))return z}else for(let M=0;M<m.length;M++){const z=m[M];if(!Y(z)&&String(Q(n.value,z))===String(u))return z}}},[m,n,ye]),Ot=e.useCallback((u,w,M)=>Y(u)?!1:M?String(u).toLowerCase()===(w==null?void 0:w.toString().toLowerCase()):String(u)===(w==null?void 0:w.toString()),[]),St=e.useCallback((u,w)=>{if(!Y(m)){const z=m.find(U=>!Y(Q(n.value,U))&&Ot(String(Q(n.value||"",U)),u,w));return z?Q(n.text||n.value,z):null}return null},[m,n,ye]),se=e.useCallback(u=>{const w=ye(r).typeof;return w==="string"||w==="number"||w==="boolean"?u.toString():St(u,!!S)||""},[St,ye,r]),mt=e.useCallback(u=>{var M;const w=((M=u.event.currentTarget.dataset)==null?void 0:M.value)??null;if(w){let z;const U=ye(r).typeof;U==="string"||U==="number"||U==="boolean"?z=w:z=xe(He(w)),z&&se(w)}oe(u.index),We(null),I==null||I(u.event,u.index)},[xe,He,se,I,ye,r]),Se=e.useCallback(u=>{let w="",M="",z=!1;if(c!==null)if(typeof u.item=="string"||typeof u.item=="number"||typeof u.item=="boolean")w=M=String(u.item),z=String(u.item)===String(c);else if(w=String(Q(n.value||"",u.item)),M=String(Q(n.text||n.value||"",u.item)),_){const ae=n==null?void 0:n.value,fe=ae&&typeof c=="object"&&c!==null?c[ae]:void 0;z=w===String(fe??"")}else z=w===String(c);let U=me!==null?u.index===me:z;try{const ae=i;if(ae!=null){const fe=String(typeof ae=="object"?Q(n.value||"value",ae):ae),Me=String(typeof ae=="object"?Q(n.text||n.value||"",ae):ae);U=String(w)===fe&&String(M)===Me}}catch{U=!1}const ee=i?!1:(m==null?void 0:m[0]).isHeader?u.index===1:u.index===0,re=n.disabled&&typeof u.item=="object"&&Q(n.disabled,u.item)===!0,ge=[U?Ie.selected:"",ee?Ie.focus:"",re?Ie.disabled:""].filter(Boolean).join(" "),ue=`${b}-option-${u.index}`;return{className:ge,id:G?G(u.index):ue,"aria-selected":U?"true":"false","aria-disabled":re?"true":"false",ref:ae=>{ne.current[u.index]=ae}}},[m,me,X,c,n,Ie,Le,i]),lt=e.useMemo(()=>!n||Object.keys(n).length===0?n:Object.keys(n).length>0?{id:n==null?void 0:n.value,text:n==null?void 0:n.text,groupBy:n==null?void 0:n.groupBy,disabled:n==null?void 0:n.disabled,htmlAttributes:n==null?void 0:n.htmlAttributes}:n,[n]),it=e.useMemo(()=>t.jsx(Js,{getItemProps:Se,items:m,parentClass:X,itemTemplate:x,groupTemplate:A,fields:lt,ariaAttributes:{itemRole:"option",listRole:"listbox",groupItemRole:"presentation"},onSelect:mt,virtualization:g,onScrollRequest:le,disableDefaultInteractions:!0}),[X,x,A,m,mt,Se,n,i]),Oe=e.useCallback(()=>(n.groupBy||x)&&Re.current?Array.from(Re.current.getElementsByClassName(Ie.li)):ne.current.filter(Boolean),[n.groupBy,x,Ie.li]),Fe=e.useCallback(()=>{const u=Re.current;if(!u)return null;const w=u.querySelector(".sf-ul");return w||null},[]),$e=e.useCallback(()=>m,[m,Ae]),ct=e.useCallback(u=>{var z;let w=-1;const M=Oe();for(let U=0;U<M.length;U++){const ee=((z=M[U].dataset)==null?void 0:z.value)??null;if(!Y(u)&&!Y(ee)&&String(ee)===String(u)){w=U;break}}return w},[Oe]);e.useImperativeHandle(l,()=>({getFormattedValue:He,getDataByValue:xe,getIndexByValue:ct,getTextByValue:se,getScrollContainer:Fe,getListItems:Oe,getFilteredListData:$e,filterType:F,filter:xt}),[He,xe,ct,se,Oe,m,Fe]);const Ye=u=>u==="ArrowUp"||u==="ArrowDown"||u==="Home"||u==="End"||u==="PageUp"||u==="PageDown",we=e.useCallback(u=>{var w;if(f&&f>0){const M=(w=Ve.current)==null?void 0:w.value;je.current&&(clearTimeout(je.current),je.current=null),pt(M),je.current=window.setTimeout(()=>{_e(u),clearTimeout(je.current),je.current=null},f)}else _e(u)},[f,_e,Ve,je,pt]),ve=e.useCallback(u=>{u.key!=="Enter"&&!Ye(u.key)&&qe(u,s.keyActionHandler)},[qe,s.keyActionHandler]),be=e.useCallback(u=>{var w;if(u.key==="Enter"){u.stopPropagation(),qe(u,s.keyActionHandler);return}if(Ye(u.key)){u.preventDefault(),u.stopPropagation(),(w=s.keyActionHandler)==null||w.call(s,u);return}},[qe,s.keyActionHandler]);return t.jsx(t.Fragment,{children:q?t.jsxs("div",{className:y===Ee.Small?"sf-small":y===Ee.Large?"sf-large":"sf-medium",ref:Re,children:[o&&t.jsx("span",{className:"sf-ddl-filter-parent",children:t.jsxs("span",{className:`sf-input-group sf-control sf-input-focus ${y===Ee.Small?"sf-small":y===Ee.Large?"sf-large":"sf-medium"}`,children:[t.jsx(Pn,{name:b+"_filter",ref:Ve,type:"text",value:Je,className:"sf-input-filter",placeholder:h,title:"Filter",onChange:we,onKeyUp:ve,onKeyDown:be}),T?t.jsx(Yt,{size:y===Ee.Small?"16px":"20px",visible:!0}):Wn(Je,Be)]})}),C&&t.jsx("div",{className:"sf-dd-header",children:t.jsx(or,{headerTemplate:C})}),m.length===0?Bt:it,P&&t.jsx("div",{className:"sf-dd-footer",children:t.jsx(lr,{footerTemplate:P})})]}):Vt&&t.jsx("div",{className:Ie.root+" "+Ie.content+" "+Ie.noData,children:Ht})})});e.memo(Gn);Qt.load({"en-US":{scheduler:{save:"Add",cancel:"Close",delete:"Remove",newEvent:"Add Event"}}});const pr=({locale:s="en-US"})=>{const l=e.useRef(null),r={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}};return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{})]})})})})},kr={title:"Scheduler/Editor Window",parameters:{layout:"padded",docs:{description:{component:"Meta configuration for the Storybook stories"}}},tags:["autodocs"]},It={render:s=>t.jsx(pr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to customize the header and footer text of the default editor popup while preserving the standard button functionality (Save / Cancel / Delete)."}}}},mr=({locale:s="en-US"})=>{const l=e.useRef(null),r={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},n=c=>{const a=()=>{console.log("Custom save clicked"),c.onClose()},o=t.jsx("div",{style:{padding:"10px",backgroundColor:"rgb(103, 80, 164)",color:"white"},children:"Create/Edit Appointment"}),h=t.jsxs(t.Fragment,{children:[t.jsx(mn,{variant:_t.Standard,onClick:a,children:"Save Appointment"}),t.jsx(mn,{variant:_t.Standard,onClick:c.onClose,children:"Cancel"})]});return t.jsx(Xe,{...c,header:o,footer:h})};return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:n,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{})]})})})})},Et={render:s=>t.jsx(mr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to completely replace the header and footer of the editor popup with your own custom React elements."}}}},gr=({locale:s="en-US"})=>{const l=e.useRef(null),r=e.useRef({}),n={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly",priority:"Priority"}},c=o=>{if(o.data={...o.data,...r.current},!o.data.priority){alert("Please select a game/priority!"),o.cancel=!0;return}},a=o=>{var C;const{editor:h}=o,[S,v]=e.useState({priority:((C=h.originalData)==null?void 0:C.priority)||null});e.useEffect(()=>{r.current=S},[S]),e.useEffect(()=>{h.mode==="event"&&o.editor.originalData?v({priority:h.originalData.priority||null}):v({priority:null})},[h.mode,h.originalData,o.open]);const F=[{Id:"game1",Game:"Badminton"},{Id:"game2",Game:"Football"},{Id:"game3",Game:"Tennis"}],y={text:"Game",value:"Id"},x=()=>t.jsx(Zt,{id:"priority",placeholder:"Select a game",className:"custom-editor-dropdownlist",labelMode:"Auto",dataSource:F,fields:y,value:S.priority??null,onChange:P=>{v(V=>({...V,priority:P.value}))},style:{width:"100%"}}),A=[{name:"subject",props:{labelMode:"Auto",placeholder:"Event Title"}},{name:"priority",component:t.jsx(x,{})},{name:"location",props:{labelMode:"Auto",placeholder:"Meeting Location"}},{name:"isAllDay",props:{label:"IsAllDay Event"}},{name:"startTime",props:{placeholder:"Start Time"}},{name:"endDate",props:{placeholder:"End Date"}},{name:"startDate",props:{placeholder:"Start Date"}},{name:"endTime",props:{placeholder:"Start Date"}},{name:"description"}];return t.jsx(Xe,{...o,fields:A,dialogProps:{header:"Appointment Details",width:"600px",minHeight:"400px"}})};return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:n,editor:a,onEditorSave:c,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{})]})})})})},Rt={render:s=>t.jsx(gr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to add a custom component (such as a dropdown) between the existing default fields and override the existing default field."}}}},hr=({locale:s="en-US"})=>{const l=e.useRef(null),r={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},n=c=>{const a=[{name:"subject"},{name:"startDate"},{name:"location"},{name:"endDate"},{name:"startTime"},{name:"endTime"},{name:"description"},{name:"isAllDay"}];return t.jsx(Xe,{...c,fields:a})};return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:n,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{})]})})})})},Tt={render:s=>t.jsx(hr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to reorder the existing default fields in editor popup."}}}},yr=({locale:s="en-US"})=>{const l=e.useRef(null),r={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},n=a=>t.jsx(Xe,{...a,dialogProps:{header:"Quick Event Editor",width:"400px"}}),c=a=>t.jsx(Xe,{...a,dialogProps:{header:"Detailed Event Editor (Month View)",width:"650px"}});return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:n,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{editor:c})]})})})})},Ft={render:s=>t.jsx(yr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to use different editor popup layouts depending on the view "}}}},xr=({locale:s="en-US"})=>{const l=e.useRef(null),r={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",isBlock:"IsBlock",isReadonly:"IsReadonly"}},n=c=>{const a=t.jsx(Ne,{name:"subject",children:t.jsx(zt,{placeholder:"Enter event title...",value:c.editor.subject??"",onChange:S=>c.editor.handleSubjectChange(S),className:"custom-subject-field",labelMode:"Always"})}),o=t.jsx(Ne,{name:"startDate",children:t.jsx(Gt,{placeholder:"Select start date",value:c.editor.startDateOnly,onChange:c.editor.handleStartDateChange,className:"custom-date-field",labelMode:"Always"})}),h=[{name:"subject",component:a},{name:"location"},{name:"startDate",component:o},{name:"startTime"},{name:"endDate"},{name:"endTime"},{name:"isAllDay"},{name:"description",visible:!1}];return t.jsx(Xe,{...c,fields:h,dialogProps:{header:"Custom Field Components",width:"600px"}})};return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:r,editor:n,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{})]})})})})},Mt={render:s=>t.jsx(xr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to replace an existing field with a custom field and shows how to hide the default fields."}}}},Sr=({locale:s="en-US"})=>{const l=e.useRef(null),r=e.useRef({}),n={dataSource:ot,fields:{id:"Id",subject:"Subject",location:"Location",description:"Description",startTime:"StartTime",endTime:"EndTime",isAllDay:"IsAllDay",priority:"Priority"}},c=[{Id:"game1",Game:"Badminton"},{Id:"game2",Game:"Football"},{Id:"game3",Game:"Tennis"},{Id:"game4",Game:"Cricket"}],a={text:"Game",value:"Id"},o=S=>{if(S.data={...S.data,...r.current},!S.data.priority){alert("Please select a game/priority!"),S.cancel=!0;return}S.data.Subject&&typeof S.data.Subject=="string"&&(S.data.Subject=S.data.Subject.toUpperCase())},h=S=>{const{editor:v}=S,{subject:F,location:y,description:x,isAllDay:A,startDateOnly:C,startTimeOnly:P,endDateOnly:V,endTimeOnly:O,handleSubjectChange:B,handleLocationChange:_,handleDescriptionChange:W,handleStartDateChange:b,handleStartTimeChange:f,handleEndDateChange:p,handleEndTimeChange:i,handleIsAllDayChange:g,originalData:j}=v,[I,E]=e.useState({priority:(j==null?void 0:j.priority)||null});e.useEffect(()=>{r.current=I},[I]),e.useEffect(()=>{v.mode==="event"&&j?E({priority:j.priority||null}):E({priority:null})},[v.mode,j,S.open]);const k=L=>{L.value&&(b(L),p(L))};return t.jsx(Xe,{...S,dialogProps:{header:v.mode==="event"?"Edit Event":"New Event",width:"900px",minHeight:"520px"},children:t.jsxs("div",{className:"custom-editor-form-container",style:{display:"flex"},children:[t.jsx("div",{style:{padding:"16px"},children:t.jsxs(js,{id:"customEventForm",rules:{},children:[t.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"20px"},children:[t.jsx(Ne,{name:"event-title",children:t.jsx(zt,{value:F||"",onChange:B,placeholder:"Enter event title"})}),t.jsx(Ne,{name:"event-location",children:t.jsx(zt,{placeholder:"Location",value:y||"",onChange:_})})]}),t.jsxs("div",{style:{display:"flex",gap:"16px",marginBottom:"20px",flexWrap:"wrap"},children:[t.jsx(Ne,{name:"event-startDate",children:t.jsx(Gt,{placeholder:"Start Date",value:C,onChange:b,format:"dd MMM yyyy"})}),!A&&t.jsx(Ne,{name:"event-startTime",children:t.jsx(pn,{placeholder:"Start Time",value:P,onChange:f,format:"HH:mm",step:30})}),t.jsx(Ne,{name:"event-endDate",children:t.jsx(Gt,{placeholder:"End Date",value:V,onChange:p,format:"dd MMM yyyy"})}),!A&&t.jsx(Ne,{name:"event-endTime",children:t.jsx(pn,{placeholder:"End Time",value:O,onChange:i,format:"HH:mm",step:30})})]}),t.jsxs("div",{style:{display:"flex",gap:"24px",alignItems:"center",marginBottom:"20px"},children:[t.jsx(Ne,{name:"event-isAllDay",children:t.jsx(ws,{label:"Full Day",checked:A,onChange:g})}),t.jsx(Ne,{name:"event-priority",children:t.jsx(Zt,{id:"priority",placeholder:"Select a game",dataSource:c,fields:a,value:I.priority??null,onChange:L=>{E(N=>({...N,priority:L.value}))},style:{width:"300px"},className:"custom-editor-dropdownlist"})})]}),t.jsx(Ne,{name:"event-notes",children:t.jsx(Ds,{value:x||"",onChange:W,rows:4,placeholder:"Enter event details, participants, etc."})})]})}),t.jsx("div",{className:"custom-editor-popup-calender",children:t.jsx(ks,{onChange:k,value:C})})]})})};return t.jsx("div",{className:"control-section",children:t.jsx("div",{className:"scheduler-control",children:t.jsx(Ze,{locale:s,children:t.jsxs(et,{ref:l,height:"550px",width:"100%",defaultSelectedDate:new Date(2017,10,1),defaultView:"Week",eventSettings:n,editor:h,onEditorSave:o,children:[t.jsx(tt,{}),t.jsx(nt,{}),t.jsx(st,{}),t.jsx(rt,{})]})})})})},Nt={render:s=>t.jsx(Sr,{...s}),parameters:{docs:{description:{story:"Demonstrates how to customize the entire editor popup using reactive forms, including a layout with a calendar preview, grouped fields, a custom sport selector, uppercase subject transformation, and more."}}}};var xn,Sn,vn;It.parameters={...It.parameters,docs:{...(xn=It.parameters)==null?void 0:xn.docs,source:{originalSource:`{
  render: args => <HeaderFooter {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to customize the header and footer text of the default editor popup while preserving the standard button functionality (Save / Cancel / Delete).'
      }
    }
  }
}`,...(vn=(Sn=It.parameters)==null?void 0:Sn.docs)==null?void 0:vn.source}}};var Cn,bn,jn;Et.parameters={...Et.parameters,docs:{...(Cn=Et.parameters)==null?void 0:Cn.docs,source:{originalSource:`{
  render: args => <CustomHeaderFooter {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to completely replace the header and footer of the editor popup ' + 'with your own custom React elements.'
      }
    }
  }
}`,...(jn=(bn=Et.parameters)==null?void 0:bn.docs)==null?void 0:jn.source}}};var wn,Dn,kn;Rt.parameters={...Rt.parameters,docs:{...(wn=Rt.parameters)==null?void 0:wn.docs,source:{originalSource:`{
  render: args => <CustomFieldsExample {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to add a custom component (such as a dropdown) between the existing default fields and override the existing default field.'
      }
    }
  }
}`,...(kn=(Dn=Rt.parameters)==null?void 0:Dn.docs)==null?void 0:kn.source}}};var In,En,Rn;Tt.parameters={...Tt.parameters,docs:{...(In=Tt.parameters)==null?void 0:In.docs,source:{originalSource:`{
  render: args => <ReorderDefaultFieldsExample {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to reorder the existing default fields in editor popup.'
      }
    }
  }
}`,...(Rn=(En=Tt.parameters)==null?void 0:En.docs)==null?void 0:Rn.source}}};var Tn,Fn,Mn;Ft.parameters={...Ft.parameters,docs:{...(Tn=Ft.parameters)==null?void 0:Tn.docs,source:{originalSource:`{
  render: args => <ViewLevelOverride {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to use different editor popup layouts depending on the view '
      }
    }
  }
}`,...(Mn=(Fn=Ft.parameters)==null?void 0:Fn.docs)==null?void 0:Mn.source}}};var Nn,Ln,An;Mt.parameters={...Mt.parameters,docs:{...(Nn=Mt.parameters)==null?void 0:Nn.docs,source:{originalSource:`{
  render: args => <CustomComponentsExample {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to replace an existing field with a custom field and shows how to hide the default fields.'
      }
    }
  }
}`,...(An=(Ln=Mt.parameters)==null?void 0:Ln.docs)==null?void 0:An.source}}};var Vn,Bn,Hn;Nt.parameters={...Nt.parameters,docs:{...(Vn=Nt.parameters)==null?void 0:Vn.docs,source:{originalSource:`{
  render: args => <CustomReactiveEditorExample {...args} />,
  parameters: {
    docs: {
      description: {
        story: 'Demonstrates how to customize the entire editor popup using reactive forms, including a layout with a calendar preview, grouped fields, a custom sport selector, uppercase subject transformation, and more.'
      }
    }
  }
}`,...(Hn=(Bn=Nt.parameters)==null?void 0:Bn.docs)==null?void 0:Hn.source}}};const Ir=["HeaderAndFooter","CustomHeaderAndFooter","CustomFieldsWithLabels","ReorderDefaultFields","ViewLevelEditorOverride","CustomFieldComponents","CustomFormsExample"];export{Mt as CustomFieldComponents,Rt as CustomFieldsWithLabels,Nt as CustomFormsExample,Et as CustomHeaderAndFooter,It as HeaderAndFooter,Tt as ReorderDefaultFields,Ft as ViewLevelEditorOverride,Ir as __namedExportsOrder,kr as default};
